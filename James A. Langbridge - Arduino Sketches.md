---
alias: "Arduino Sketches", "langbridgeArduinoSketches2015"
author: "James A. Langbridge"
format: Book
tags: [n/reference]
cover: https://m.media-amazon.com/images/I/51hRFzL6fHL._SY160.jpg
date: 2022-10-25
isbn: 9781118919699
---
# Arduino Sketches

![rw-book-cover](https://m.media-amazon.com/images/I/51hRFzL6fHL._SY160.jpg)

## Metadata
- Author:: [[James A. Langbridge]]
- Title:: Arduino Sketches
- garden-topic:: [[Arduino]]
- literature-note:: [[LN - langbridgeArduinoSketches]]
- status:: #library/🟣  #inbox/reading 
- summary::

## New highlights added October 31, 2022 at 10:22 PM

### Chapter 5 - Serial - UART ✅ 

#### UART Communications ([Location 2318](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2318))
- A Universal Asynchronous Receiver/Transmitter (UART) is a piece of hardware that translates from serial and parallel forms. ([Location 2318](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2318))
- The native UART controller on all Arduinos has a buffer of 64 bytes, ([Location 2322](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2322))
- baud rate ([Location 2327](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2327))
- If you want to send a logical one several times in a row, you do not need to change the signal. ([Location 2328](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2328))
- The receiver reads the value and then waits for a millisecond before the next reading. ([Location 2330](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2330))
- It is important that both devices share the same baud rate. ([Location 2332](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2332))
- A baud rate of 1,000 baud is synonymous to a bit rate of 1,000 bits per second. ([Location 2335](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2335))
- The data is encapsulated, placed inside other bits that help the computer identify the data being sent. ([Location 2336](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2336))
- RS-232 connections almost always have a start bit, 8 data bits, and a stop bit for a total of 10 bits. ([Location 2340](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2340))
- An example data packet is illustrated in Figure 5.3. ([Location 2341](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2341))
- Various baud rates exist; most are either multiples of the original baud rate, 75 baud, or multiples of crystal oscillators. ([Location 2345](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2345))
- In embedded systems, 9,600, 19,200, and 115,200 are common values. ([Location 2348](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2348))
- Data Bits ([Location 2349](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2349))
- The number of data bits in each packet can be between 5 and 9 bits. ([Location 2350](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2350))
- Most modern systems use 8 bits because that corresponds to 1 byte. ([Location 2352](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2352))
- Parity ([Location 2355](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2355))
- A parity bit can be added to make the number of 1s in a packet even or odd. ([Location 2356](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2356))
- modern signaling technology no longer needs parity checking, but it is still available if needed. ([Location 2359](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2359))
- Stop Bits ([Location 2360](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2360))
- Modern electronic devices usually use 1 stop bit, but older systems can use 1 1/2 or 2 bits. ([Location 2362](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2362))

**Debugging and Output ([Location 2364](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2364))**
	garden-topic:: [[Arduino Serial Monitor]]
- All Arduinos have at least one serial port to communicate with a PC called Serial. ([Location 2388](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2388))
- Some boards have several UART devices. The Arduino Mega, for example, has three additional UART controllers called Serial1, Serial2, and Serial3. ([Location 2388](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2388))
- The Arduino Leonardo's microcontroller has a built-in USB communication device, separating USB and Serial communication. ([Location 2391](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2391))
- On the Leonardo, the Serial class refers to the virtual serial driver, not the serial device on pins 0 and 1. These pins are connected to Serial1. ([Location 2391](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2391))
- To begin using a UART device, you must first do some basic configuration. You need to set at least one parameter; the baud rate, or speed. ([Location 2395](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2395))
- Arduinos, by default, require you to set the speed and set 8N1 as a default configuration. ([Location 2397](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2397))
- some Bluetooth devices can send serial data at speeds much faster than 115,200, in the order of one megabaud (one million baud). Be aware of what the device or computer is expecting. ([Location 2407](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2407))
- For the Arduino Leonardo, you can detect if the USB serial communications channel is open. ([Location 2413](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2413))
- if(Serial) ([Location 2416](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2416))
- If you have a number of statements in your setup() that you want to send serially, it is useful to wait until the Leonardo's serial port has initialized before proceeding. ([Location 2417](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2417))
- This works on the Leonardo, Micro, Esplora, and other 32U4-based boards. ([Location 2421](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2421))
- On all other boards, this function always returns true, even if the device is not connected to USB. ([Location 2421](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2421))

Sending Text ([Location 2429](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2429))
- By default, numbers are displayed in decimal and rounded to two decimal places. You can change both of these. ([Location 2437](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2437))
- You need to escape characters like quotation marks, backslashes, and single quotes. ([Location 2456](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2456))
- other special ASCII characters ([Location 2457](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2457))
- Sending Data ([Location 2482](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2482))
- If you are trying to output the result of a sensor, it sometimes isn't practical to convert that data to an int and send it as text. ([Location 2483](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2483))
- Because the default serial connection can send 8 bits of data per packet, you can send a byte in a single data packet. ([Location 2484](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2484))
- sending data is just as easy as sending text and can be accomplished with the write() function. ([Location 2487](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2487))
- It can also accept a buffer as a parameter and a second parameter to indicate the length of the buffer. ([Location 2488](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2488))

Reading Data ([Location 2492](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2492))
- When the UART device receives data, it stores it in an internal buffer. This buffer normally holds 64 characters; any more, and data will be lost. Don't worry; in practice, 64 is more than enough because interrupts can be put in place to tell the microcontroller to retrieve information from this buffer before too much data arrives. ([Location 2497](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2497))
- initiate the connection. Each side must open up a serial port before being able to send and receive data. ([Location 2502](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2502))
- There are two ways people typically use available(). One way is to return the result to know the amount of bytes waiting to be read. ([Location 2513](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2513))
- int inBytes = Serial.available(); ([Location 2515](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2515))
- Trying to read the serial buffer if no data is available can waste time in your sketch. To avoid a sketch freezing while waiting for data, you can change the duration of the serial time-out, as explained here. ([Location 2520](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2520))
- You can read a byte from the data buffer using the read() function. ([Location 2523](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2523))
- This function does not return a byte, instead, it returns an int. ([Location 2524](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2524))
- The return values are in the range of 0 to 255, or –1 if no data is available. This function returns immediately and does not wait for data to arrive. ([Location 2528](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2528))
- readBytes() reads multiple bytes from a serial port and places them into a buffer. ([Location 2532](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2532))
- there is a time-out for waiting to read serial data. The time-out is set by setTime-out(). ([Location 2537](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2537))
- There is a function available that reads in serial data and stops either when all the data is read in, when there is a time-out, or when a special character is received. This function is called readBytesUntil() ([Location 2544](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2544))
- There is a way to get hold of the first byte of data from the UART buffer without modifying the buffer. ([Location 2554](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2554))
- Is this ASCII data that needs to be put in a string? Or is this binary data that needs to be put in another buffer? ([Location 2555](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2555))
- data = Serial.peek(); ([Location 2560](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2560))

Parsing Data ([Location 2563](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2563))
- parseInt() and parseFloat() scan through text and extract the first int or float encountered. ([Location 2569](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2569))
- parseInt() would ignore the first letters and extract the number ([Location 2576](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2576))
- The data before the number and the number itself will be removed from the buffer. The rest of the data remains intact. ([Location 2577](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2577))
- If your application requires you to terminate a serial connection, it can be done by calling end(). ([Location 2586](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2586))
- the device defaults to 8 data bits, no parity, and 1 stop bit. ([Location 2625](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2625))
- In ASCII, capital letters are associated with values from 65 to 90. write()sends these as bytes. The Arduino's serial monitor interprets these as the ASCII equivalent. ([Location 2642](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2642))
- If print() had been used, the decimal number would have been printed, ([Location 2643](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2643))

SoftwareSerial ([Location 2670](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2670))
- When no more serial ports are physically available, the SoftwareSerial library can use software to emulate serial communications on other digital pins without the need for a UART. This allows you to have multiple serial ports on a device that would not normally allow it. ([Location 2670](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2670))
- only one SoftwareSerial port can receive data at any time. Also, speed is limited to 115,200 baud. ([Location 2673](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2673))
- #include <SoftwareSerial.h> ([Location 2686](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2686))
- To check the overflow status of the buffer, the call overflow() function can be used: ([Location 2689](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2689))
- SoftwareSerial requires a pin that supports change interrupts, which, depending on your model, is not available on all pins. ([Location 2694](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2694))
- The Mega2560 can use pins 10 through 15, 50 to 53, and A8 to A15 for RX. On the Leonardo, pins 8 through 11 and 14 to 16 can be used. ([Location 2695](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2695))
- The transmit pin does not require interrupt support, ([Location 2696](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2696))

✅

### Chapter 6 EEPROM ([Location 2702](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2702))
- Volatile memory contains data as long as it is powered. When the power is removed, all the data is lost. ([Location 2714](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2714))
- This is how RAM works on your home computer. It uses a memory module called DDR. Actually; DDR memory is even more volatile than you might at first think; it needs to be refreshed frequently to keep the data in place. ([Location 2715](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2715))
- Nonvolatile memory is memory that retains data when power is removed. ([Location 2721](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2721))
- Electrically Programmable Read Only Memory (EPROM) is a special memory that retains its data even when power has been removed. ([Location 2727](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2727))
- Reprogramming the first EPROM chips was not something particularly easy to accomplish; these devices had a quartz “window” on the top of the chip. By placing the chip under ultraviolet light, the device could be erased within 20 minutes. When fully erased, the device could be reprogrammed. ([Location 2730](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2730))
- Electrically Erasable Programmable Read Only Memory (EEPROM) is a new generation of EPROM devices. ([Location 2735](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2735))
- EEPROM devices can be modified byte by byte, providing an excellent method of storing long-term variables. ([Location 2738](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2738))
- Data retention for EEPROM devices is normally guaranteed for 10 to 20 years, but that is only a minimum. ([Location 2739](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2739))
- Most EEPROM devices support at least 100,000 writes to the same byte, often much more. ([Location 2742](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2742))
- EEPROMs are slower than other types of memory due to their technology. EEPROM cannot be written to directly; the memory must first be erased before bits can be written, and it is this erase phase that damages the device ever so slightly. ([Location 2745](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2745))
- Arduinos have three different memory technologies: RAM, Flash, and EEPROM. ([Location 2749](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2749))
- EEPROM memory on ATmega microcontrollers support at least 100,000 writes and can be read and written to byte by byte. ([Location 2754](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2754))
- Updating your sketch won't overwrite your variables. ([Location 2755](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2755))
- #include <EEPROM.h> ([Location 2763](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2763))
- Writing a byte erases the byte in memory before rewriting, and this takes some time. Each write takes approximately 3.3 ms for each byte. ([Location 2791](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2791))
- If you have several bits to store, you might want to try storing them all in 1 byte to save space, for example, a notification LED that the user can program as he wants. ([Location 2799](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2799))
- // primary colors #define BLUE  4  // 100 #define GREEN 2  // 010 #define RED   1  // 001 ([Location 2803](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2803))
- Let's imagine you want a cyan light to be lit up if something occurs. Cyan is a mix of green and blue. In English, you would say that you want green and blue, but in computer logic, you would say that you want GREEN or BLUE. A logical OR is true if one ([Location 2822](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2822))
- of the two values being compared is true. In this case, GREEN (010) is compared to BLUE (100), and the answer becomes 110. ([Location 2824](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2824))
- So, the result, called CYAN, is 110, but now that you have encoded that, how can you get the data out of it? This time, you will be using a logical AND. ([Location 2826](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2826))
- So, CYAN AND BLUE? CYAN has a value of 110, and the value of BLUE is 100. The leftmost bit is 1 in both, so that will return as a 1. The second bit is 1 in CYAN and 0 in BLUE. It returns 0. The third bit is 0 in both values; it also returns 0. The result is 100. ([Location 2828](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2828))
- To read boolean data, read the byte containing the data from EEPROM and then perform a logical AND with the reference value. ([Location 2841](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2841))
- To create boolean data, you must take an empty variable (initialized as 0) and then perform logical OR operations with reference values. ([Location 2842](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2842))
- to clear a bit, you must use a logical NOT AND. NOT inverts a status; if it was previously TRUE, it will become FALSE. ([Location 2844](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2844))
- To toggle a bit, simply use the logical XOR to invert its status. ([Location 2847](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2847))
- A bitwise OR is performed using the | symbol: ([Location 2856](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2856))
- To perform a bitwise AND, use the & symbol: ([Location 2859](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2859))
- to perform an exclusive OR, use the ^ symbol: ([Location 2862](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2862))
- In Arduino, it's possible to use a char array as a string, or you can use the String data type for more robust data manipulation, at the cost of program size. ([Location 2867](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2867))
- on all Arduinos except the Due, an int is written as 2 bytes. ([Location 2892](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2892))
- Shifting takes a binary number and “shifts” data to the left or to the right by a certain number of bits. ([Location 2894](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2894))
- Masking makes it possible to perform bit-wise operations on a portion of a binary number. ([Location 2895](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2895))
- byte lowByte = ((value >> 0) & 0xFF);   // Now shift the binary number 8 bits to the right   byte highByte = ((value >> 8) & 0xFF); ([Location 2897](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2897))
- 0xFF is the hexadecimal representation of 255, the largest number that a byte can hold. ([Location 2906](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2906))
- You cannot perform shifts with a floating-point, more advanced techniques are required. ([Location 2908](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2908))
- Example Program ([Location 2923](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2923))
- The Arduino should first check its EEPROM memory. If no information is found, it will ask the user some questions and then store that information into nonvolatile memory. If the information is found, it will tell the user what information it has and then delete the contents of its memory. ([Location 2926](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2926))
- // Does the EEPROM have any information? 21    myValue = EEPROM.read(EEPROM_DATAPOS); 22 23    if (myValue == 42) ([Location 2937](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2937))
- To do this, a “control” byte is allocated. The Arduino reads a value in the EEPROM. If it receives the number 42, it presumes that the EEPROM contains valid information and attempts to read that data. ([Location 2979](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2979))
- some designers add a reset button to their project. By adding a few lines to your sketch, you can erase EEPROM data in the case of a first-time power on, or if the Arduino board were changed. Some applications use the control number for error checking, adding several numbers throughout EEPROM memory for more reliability. ([Location 3006](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3006))
- components are connected to the I2C bus (explained in Chapter 8) and cannot be addressed by the EEPROM library. ([Location 3014](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3014))
- The EEPROM library can handle only the internal EEPROM, not external. ([Location 3015](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3015))
- Writing a byte erases the byte in memory before rewriting, and this takes some time. Each write takes approximately 3.3 ms for each byte. ([Location 2791](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2791))
- If you have several bits to store, you might want to try storing them all in 1 byte to save space, for example, a notification LED that the user can program as he wants. ([Location 2799](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2799))
- // primary colors #define BLUE  4  // 100 #define GREEN 2  // 010 #define RED   1  // 001 ([Location 2803](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2803))
- In Arduino, it's possible to use a char array as a string, or you can use the String data type for more robust data manipulation, at the cost of program size. ([Location 2867](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2867))**
- on all Arduinos except the Due, an int is written as 2 bytes. ([Location 2892](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2892))
- Shifting takes a binary number and “shifts” data to the left or to the right by a certain number of bits. ([Location 2894](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2894))
- Masking makes it possible to perform bit-wise operations on a portion of a binary number. ([Location 2895](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2895))
- byte lowByte = ((value >> 0) & 0xFF);   // Now shift the binary number 8 bits to the right   byte highByte = ((value >> 8) & 0xFF); ([Location 2897](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2897))
- 0xFF is the hexadecimal representation of 255, the largest number that a byte can hold. ([Location 2906](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2906))
- You cannot perform shifts with a floating-point, more advanced techniques are required. ([Location 2908](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2908))
- Example Program ([Location 2923](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2923))
- The Arduino should first check its EEPROM memory. If no information is found, it will ask the user some questions and then store that information into nonvolatile memory. If the information is found, it will tell the user what information it has and then delete the contents of its memory. ([Location 2926](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2926))
- // Does the EEPROM have any information? 21    myValue = EEPROM.read(EEPROM_DATAPOS); 22 23    if (myValue == 42) ([Location 2937](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2937))
- To do this, a “control” byte is allocated. The Arduino reads a value in the EEPROM. If it receives the number 42, it presumes that the EEPROM contains valid information and attempts to read that data. ([Location 2979](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2979))
- some designers add a reset button to their project. By adding a few lines to your sketch, you can erase EEPROM data in the case of a first-time power on, or if the Arduino board were changed. Some applications use the control number for error checking, adding several numbers throughout EEPROM memory for more reliability. ([Location 3006](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3006))
- components are connected to the I2C bus (explained in Chapter 8) and cannot be addressed by the EEPROM library. ([Location 3014](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3014))
- The EEPROM library can handle only the internal EEPROM, not external. ([Location 3015](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3015))

### Chapter 7 SPI ([Location 3029](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3029)) ✅
- Although serial connections have a lot of advantages, they also have disadvantages. Having a modem and a programmer requires a computer with two serial ports; a serial port cannot (easily) handle multiple devices. ([Location 3048](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3048))
- To allow multiple devices to be used on a single serial port, the SPI bus was created. ([Location 3055](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3055))
- SPI is short for Serial Peripheral Interface and is indeed an interface to devices, using a synchronous serial line capale of full-duplex communication (meaning that both devices can send and receive at the same time). ([Location 3055](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3055))
- Communication is made with only one slave at a time; to communicate with another slave, the master must first stop communicating with the first slave. Slaves cannot “talk” on the network without being instructed to by the master. ([Location 3058](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3058))
- The “Master Out-Slave In” (MOSI) and “Master In-Slave Out” (MISO) wires are used for data communication; ([Location 3060](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3060))
- SCLK is a serial clock that regulates the speed of the communication; and SS (short for Slave Select) is used to select the peripheral. ([Location 3061](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3061))
- The MOSI, MISO, and SCLK wires are connected to every device on the SPI bus, and devices listen only to the master and communicate if their SS wire is set to active low. ([Location 3064](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3064))
- RS-232 uses two wires (Tx and Rx), but it requires a set clock speed on both sides of communication. The clock on both devices connected via RS-232 need to be in agreement, ([Location 3071](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3071))
- SPI masters generate their own clock signal and send that signal to every device. SPI devices are therefore normally simpler to design, cheaper to fabricate, and easier to use. ([Location 3073](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3073))
- RS-232 was designed for long distance communications; SPI is not. It does not need to handle signal noise like RS-232 and therefore does not require checksum bits. ([Location 3075](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3075))
- where RS-232 communications have to send 7-bit or 8-bit data, SPI can select any length it wants. ([Location 3076](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3076))
- Some devices will be active on a rising edge (as the clock goes from low to high), and some will be active on a falling edge (as the clock goes from high to low). Also, the clock can be configured to be active low or active high. ([Location 3081](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3081))
- you have to know if the device is expecting the most-significant bit first or the least-significant bit first. Data is normally shifted out with the most significant bit first. ([Location 3084](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3084))
- some sensors (like the DHT-11 used later in this book) require a small timeframe in which the conversion will be made. If this is required, the master must not initiate the clock until the slave has had time to complete the conversion. ([Location 3092](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3092))
- The SPI bus on the Arduino is an exception compared to most other ports. On select Arduinos, the SPI bus is present as a dedicated header—the ICSP header, ([Location 3102](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3102))
- The ISCP header has several uses, including bypassing the Arduino bootloader to program the microcontroller directly, (ISCP is short for In-Circuit Serial Programming), ([Location 3107](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3107))
- The Arduino Uno, the reference model of the Arduino family, uses pin 11 and ICSP-4 for the SPI MOSI signal. These pins are duplicates; ([Location 3109](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3109))
- The ICSP header does not include any SS lines; only the MISO, MOSI, and SCLK lines are exposed, together with power and ground connectors. ([Location 3114](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3114))
- any digital output pin can be used as a Slave Select. ([Location 3116](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3116))
- Arduinos also have the possibility of becoming an SPI slave, and as such, AVR-based Arduinos have an input SS pin. ([Location 3118](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3118))
- The Arduino SPI library can be only a master, and as such, this pin must be configured as an output. ([Location 3119](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3119))
- On most Arduinos, this is pin 10, and on the Arduino Mega2560, it is pin 53. ([Location 3120](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3120))
- SPI Library ([Location 3122](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3122))
- #include <SPI.h> ([Location 3128](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3128))
- SPI.begin(); ([Location 3131](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3131))
- This function automatically sets the SCLK, MOSI, and SS pins to output, pulling SCLK, MOSI LOW, and SS HIGH. It also sets the MISO pin as an input. ([Location 3131](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3131))
- SPI.end(); ([Location 3134](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3134))
- To configure the SPI bus, three functions are available: setBitOrder(), setDataMode(), and setClockDivider(). ([Location 3136](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3136))
- setBitOrder() controls the way in which bits are sent on a serial line: ([Location 3139](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3139))
- setDataMode() sets the clock polarity and phase. ([Location 3143](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3143))
- setClockDivider(), is used to set the clock frequency in relation to the system clock. ([Location 3166](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3166))
- By default, AVR systems using a system clock of 16 MHz use a divider of 4, SPI_CLOCK_DIV4, resulting in an SPI bus frequency of 4 MHz. ([Location 3175](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3175))
- To send and receive data on the SPI bus, use transfer(). ([Location 3180](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3180))
- This function takes a byte as a parameter, the byte to send on the SPI bus. It returns a byte, the byte of data received on the SPI bus. ([Location 3182](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3182))
- Example Program ([Location 3236](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3236))
- For this application, you create a digital thermometer using a thermocouple. A thermocouple is a temperature measuring device created by the contact of two different conductors: differences in temperature from different points creates voltage. ([Location 3237](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3237))

- Although serial connections have a lot of advantages, they also have disadvantages. Having a modem and a programmer requires a computer with two serial ports; a serial port cannot (easily) handle multiple devices. ([Location 3048](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3048))
- To allow multiple devices to be used on a single serial port, the SPI bus was created. ([Location 3055](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3055))
- SPI is short for Serial Peripheral Interface and is indeed an interface to devices, using a synchronous serial line capable of full-duplex communication (meaning that both devices can send and receive at the same time). ([Location 3055](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3055))
- Communication is made with only one slave at a time; to communicate with another slave, the master must first stop communicating with the first slave. Slaves cannot “talk” on the network without being instructed to by the master. ([Location 3058](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3058))
- The “Master Out-Slave In” (MOSI) and “Master In-Slave Out” (MISO) wires are used for data communication; ([Location 3060](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3060))
- SCLK is a serial clock that regulates the speed of the communication; and SS (short for Slave Select) is used to select the peripheral. ([Location 3061](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3061))
- The MOSI, MISO, and SCLK wires are connected to every device on the SPI bus, and devices listen only to the master and communicate if their SS wire is set to active low. ([Location 3064](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3064))
- RS-232 uses two wires (Tx and Rx), but it requires a set clock speed on both sides of communication. The clock on both devices connected via RS-232 need to be in agreement, ([Location 3071](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3071))
- SPI masters generate their own clock signal and send that signal to every device. SPI devices are therefore normally simpler to design, cheaper to fabricate, and easier to use. ([Location 3073](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3073))
- RS-232 was designed for long distance communications; SPI is not. It does not need to handle signal noise like RS-232 and therefore does not require checksum bits. ([Location 3075](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3075))
- where RS-232 communications have to send 7-bit or 8-bit data, SPI can select any length it wants. ([Location 3076](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3076))
- Some devices will be active on a rising edge (as the clock goes from low to high), and some will be active on a falling edge (as the clock goes from high to low). Also, the clock can be configured to be active low or active high. ([Location 3081](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3081))
- you have to know if the device is expecting the most-significant bit first or the least-significant bit first. Data is normally shifted out with the most significant bit first. ([Location 3084](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3084))
- some sensors (like the DHT-11 used later in this book) require a small timeframe in which the conversion will be made. If this is required, the master must not initiate the clock until the slave has had time to complete the conversion. ([Location 3092](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3092))
- The SPI bus on the Arduino is an exception compared to most other ports. On select Arduinos, the SPI bus is present as a dedicated header—the ICSP header, ([Location 3102](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3102))
- The ISCP header has several uses, including bypassing the Arduino bootloader to program the microcontroller directly, (ISCP is short for In-Circuit Serial Programming), ([Location 3107](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3107))
- The Arduino Uno, the reference model of the Arduino family, uses pin 11 and ICSP-4 for the SPI MOSI signal. These pins are duplicates; ([Location 3109](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3109))
- The ICSP header does not include any SS lines; only the MISO, MOSI, and SCLK lines are exposed, together with power and ground connectors. ([Location 3114](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3114))
- any digital output pin can be used as a Slave Select. ([Location 3116](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3116))
- Arduinos also have the possibility of becoming an SPI slave, and as such, AVR-based Arduinos have an input SS pin. ([Location 3118](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3118))
- The Arduino SPI library can be only a master, and as such, this pin must be configured as an output. ([Location 3119](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3119))
- On most Arduinos, this is pin 10, and on the Arduino Mega2560, it is pin 53. ([Location 3120](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3120))
- SPI Library ([Location 3122](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3122))
- #include <SPI.h> ([Location 3128](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3128))
- SPI.begin(); ([Location 3131](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3131))
- This function automatically sets the SCLK, MOSI, and SS pins to output, pulling SCLK, MOSI LOW, and SS HIGH. It also sets the MISO pin as an input. ([Location 3131](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3131))
- SPI.end(); ([Location 3134](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3134))
- To configure the SPI bus, three functions are available: setBitOrder(), setDataMode(), and setClockDivider(). ([Location 3136](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3136))
- setBitOrder() controls the way in which bits are sent on a serial line: ([Location 3139](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3139))
- setDataMode() sets the clock polarity and phase. ([Location 3143](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3143))
- setClockDivider(), is used to set the clock frequency in relation to the system clock. ([Location 3166](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3166))
- By default, AVR systems using a system clock of 16 MHz use a divider of 4, SPI_CLOCK_DIV4, resulting in an SPI bus frequency of 4 MHz. ([Location 3175](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3175))
- To send and receive data on the SPI bus, use transfer(). ([Location 3180](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3180))
- This function takes a byte as a parameter, the byte to send on the SPI bus. It returns a byte, the byte of data received on the SPI bus. ([Location 3182](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3182))
- Example Program ([Location 3236](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3236))
- For this application, you create a digital thermometer using a thermocouple. A thermocouple is a temperature measuring device created by the contact of two different conductors: differences in temperature from different points creates voltage. ([Location 3237](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3237))

### Chapter 8 Wire ([Location 3386](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3386)) ✅
- Connection wires I2C, short for Inter-IC bus, is a serial bus designed to enable access to numerous devices. ([Location 3401](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3401))
- It is an easy and inexpensive way to interconnect dozens (if not hundreds) of devices on a same network. ([Location 3406](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3406))
- The newest in 2012 allows for 5 MHz clock speeds. ([Location 3416](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3416))
- Another name for I2C is the Two Wire Interface (shortened to TWI). This is where the Wire library gets its name. ([Location 3417](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3417))
- I2C requires two data wires, as well as a common ground. ([Location 3420](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3420))
- The two wires are called SDA (for Serial Data), and SCL (for Serial Clock). ([Location 3421](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3421))
- Both SDA and SCL lines are open drain, meaning that the devices can force their value low but cannot provide power, which will be provided directly from the main power line. ([Location 3422](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3422))
- For I2C to work, these two lines must be equipped with pull-up resistors, as shown in Figure 8.2. The values are not critical, and values range widely; 4.7 kilohm resistors are common. ([Location 3423](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3423))
- Arduinos have internal pull-up resistors that are automatically activated on both the SDA and SCL lines when the I2C connection is initialized. ([Location 3425](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3425))
- Connecting multiple I2C devices is extremely easy; there is no notion of chip select, chip activate, or any other mechanism. ([Location 3430](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3430))
- there is a lot of confusion concerning addressing. ([Location 3438](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3438))
- In 7-bit addressing, addresses are (of course) 7 bits long, and the last bit is used to select a read or a write, for a total of 8 bits. ([Location 3442](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3442))
- In 10-bit addressing, things are a little more complicated. ([Location 3443](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3443))
- Figure 8.3 shows both 7-bit and 10-bit addressing. ([Location 3446](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3446))
- When the master contacts a slave on the I2C network, it sends two vital pieces of information; the address of the slave, and whether it is a read or write operation. When this information is received by the slaves, each slave compares the address to its own. ([Location 3455](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3455))
- If a device has this address, it will send an acknowledge signal (referred to as ACK), ([Location 3457](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3457))
- Therefore, it is rarely possible to configure your own addresses for these devices. ([Location 3460](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3460))
- On an I2C network, this isn't possible; two identical sensors will use the same address. ([Location 3462](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3462))
- the big difference between I2C and standard serial communication; it is not full duplex, meaning that devices cannot send data and receive data at the same time. ([Location 3473](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3473))
- To read or write this data, you need to know several details: ([Location 3481](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3481))
- The slave address The register number If it is a read or write operation The length of the data to be received ([Location 3482](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3482))
- To communicate on the I2C bus, the Wire library must first be initialized. ([Location 3504](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3504))
- Wire.begin(address); // configures the Arduino as an I2C slave ([Location 3511](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3511))
- Masters do not have an address because they are free to start communications whenever they want and automatically receive all responses. ([Location 3512](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3512))
- Wire.begin(); // configure the Arduino as an I2C master ([Location 3515](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3515))
- When a slave answers, there is no encapsulation, and a write can be performed without beginning or ending a transmission. ([Location 3522](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3522))
- The I2C protocol specifies that master communication must be done in a single transmission. To avoid breaks in the message, ([Location 3525](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3525))
- Wire.endTransmission() specifies the end of the message, and sends it. ([Location 3538](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3538))
- Wire.requestFrom() creates a message and immediately sends it on the I2C bus. Now that the request has been sent, the master can wait for a message using Wire.read(). ([Location 3562](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3562))
- Wire.available() looks at the buffer and returns the amount of bytes remaining. It can be used with Wire.read() to create a routine that does not block if data is not available. ([Location 3571](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3571))
- To allow a sketch to continue while waiting for an I2C request, the Wire library allows you to create callbacks, functions that are called when an event occurs. ([Location 3583](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3583))
- Example Program ([Location 3612](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3612))
- For this example program, you use two Arduinos: one acts as an I2C master, and the second acts as an I2C slave. Both connect together using the I2C bus. Because Arduinos have internal pull-up resistors, the resulting schematic is extremely simple. The SDA pins of both devices are connected together, and the SCL pins are also connected together. There is one last, important stage: Both grounds are also connected— ([Location 3613](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3613))
- The slave Arduino will turn on and off the on-board LED according to messages from the master. The master can send “0” to turn the LED off and “1” to turn the LED on. It can also request a byte of data from the slave; this data will be the current state of the LED. The master will also turn its LED on and off, so you should see a perfectly synchronized pair of LEDs. ([Location 3620](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3620))
- Traps and Pitfalls ([Location 3709](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3709))
- Most Arduinos are powered by 5 volts, but some I2C circuits can be powered by 3.3 V, sometimes even lower. ([Location 3713](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3713))
- The Arduino's I2C pins have internal pull-up resistors that are automatically activated, pulling the line to 5 V. ([Location 3718](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3718))
- Most standard components use the 100 kHz bus speed. ([Location 3730](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3730))
- If you use an Arduino Uno, the I2C pins are A4 and A5. However, on the Arduino Mega 2560, I2C is on pins 20 and 21, so shields requiring I2C that work on the Uno will not work on the Mega 2560. Be careful if using a shield with I2C. ([Location 3736](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3736))

### Chapter 9 Ethernet ([Location 3747](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3747)) #inbox/writing 🍊
- In 1973, the Ethernet standard was proposed in Xerox PARC. It was commercially introduced in 1980 and standardized in 1983. ([Location 3777](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3777))
- Ethernet describes the physical connection between two or more computers; the electronic signaling between devices, and the physical format of the cables. ([Location 3781](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3781))
- A switch is a network device that receives packets of data and can inspect that packet to know where it is supposed to go. When it has that information, it sends that packet to the correct port—and only to that port. ([Location 3806](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3806))
- Ethernet is a physical means of connecting computers together in small or large networks, but to allow programs to talk to each other, an application layer is required. The most commonly used is TCP/IP. ([Location 3819](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3819))
- The MAC address is the hardware address of the network connector. ([Location 3824](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3824))
- IP addresses are made out of 4 bytes. Normally, the first 3 bytes are the network, and the fourth is the machine on that network. The network 192.168.0.XXX is an “internal” network, one that is shielded from the Internet. ([Location 3830](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3830))
- To connect to a server (a machine that will provide a service), a client (something that requires this service) requires two things: the address of the server (or a domain name that will later be converted to an IP address) and a port. It is not something physical; it is represented only in software. ([Location 3846](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3846))
- A server program creates a port, and a client connects to that port. Some ports are standard; others are created randomly. A web server will always be opened on port 80, and your Internet browser will automatically attempt to connect to port 80 when you add an Internet address beginning with http. When using secure HTTP, the browser connects to port 443. ([Location 3852](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3852))
- Most Arduinos do not come with Ethernet support. The Arduino Ethernet is an exception; ([Location 3861](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3861))
- Example Program ([Location 4148](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4148))
- For this program, you use an Arduino Uno with an Ethernet shield. This is a continuation of the previous chapter and still uses the light sensor. You can now read light conditions in real time by connecting to your Arduino from a web browser. ([Location 4149](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4149))

### Chapter 10 WiFi ([Location 4197](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4197))
- The WiFi Protocol ([Location 4232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4232))
- Wi-Fi standard devices use a wireless local area network (LAN). ([Location 4232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4232))
- In 1985, the U.S. Federal Communication Commission opened up part of the wireless spectrum for unlicensed use. The original wireless protocol was called WaveLAN, developed by NCR for cashier systems. ([Location 4235](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4235))
- Its successor, 802.11, was created in 1997. It had a data-rate of either 1 or 2 megabits per second and a communications distance of 60 feet. ([Location 4238](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4238))
- The original 802.11 was not widely embraced, but a new version was: 802.11b. ([Location 4240](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4240))
- 802.11b gave much faster data rates: 1, 2, 5.5, and 11 megabits per second. Although these speeds were good for browsing the web, they were not fast enough for video streaming or heavy data transfer. ([Location 4243](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4243))
- 802.11g proposed data rates of up to 55 Mbit/s, ([Location 4244](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4244))
- 802.11n can go as fast as 150 Mbit/s; 802.11ac can go up to 866.7 Mbit/s; and 802.11ad can transfer data at a staggering 6.75 Gbit/s. ([Location 4246](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4246))
- Topology ([Location 4247](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4247))
- Ad-hoc mode is an unmanaged, decentralized mode. Wireless peers are free to connect to other peers, and the network is managed by all the peers. ([Location 4249](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4249))
- Infrastructure mode is a managed mode. This topology requires one or several devices to “manage” the network, allowing peers to connect to ([Location 4254](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4254))
- Wi-Fi works with two base frequencies: 2.4 GHz and 5 GHz. However, in practice, there are several frequencies; the 2.4-GHz band operates from 2.412 GHz all the way to 2.484 GHz. ([Location 4265](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4265))
- Also, Wi-Fi is not the only wireless technology to use the 2.4 GHz band. For example, Bluetooth also uses these frequencies. ([Location 4268](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4268))
- To help, Wi-Fi uses channels. A channel is a specific frequency used by one particular wireless network. ([Location 4269](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4269))
- Encryption ([Location 4275](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4275))
- There are two forms of encryption: WEP and WPA2. ([Location 4282](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4282))
- RSSI is short for Received Signal Strength Indication and is an indication of signal strength. The units are arbitrary; some devices report signal strength as a percentage, others as a unit called dBm, or decibels per milliwatt of power. ([Location 4295](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4295))
- Arduino WiFi ([Location 4300](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4300))
- The WiFi library “talks” to the Wi-Fi shield through the SPI bus, and communication is normally handled with a small microcontroller, “translating” messages on the SPI bus to the network controller. ([Location 4301](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4301))
- The WiFi library uses the SPI bus and requires the SPI pins to be free. It uses pins 11, 12, and 13 on the Arduino Uno, and 50, 51, and 52 for the Arduino Mega. Pin 10 is used as a Slave Select pin, and pin 7 is used as a digital handshake; these pins should not be used by the rest of the sketch. ([Location 4309](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4309))
- The WiFi library methods are similar to those in the Ethernet library, and many of the functions are identical— ([Location 4311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4311))
- Example Application ([Location 4475](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4475))
- The DHT11 is a popular temperature and humidity sensor; it ([Location 4478](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4478))
- The DHT11 does have something unique. ([Location 4484](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4484))
- There is one wire used to send and to receive data, in addition to a power and ground. ([Location 4486](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4486))
- The downside to this component is that you can make only one reading every 2 seconds, ([Location 4487](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4487))
- This application uses an Arduino Uno and a SainSmart wireless shield. A DHT11 sensor will be connected to the board, allowing the user to get an accurate reading. Because I'm terrible with plants, I probably won't check the reading frequently, so this device must communicate with the outside world to send alerts. It will monitor the humidity of the dirt and send e-mails when the humidity level drops below a certain level. For this, it must be connected to the Internet. Because I don't have a wired access point nearby, I'll be using a wireless network. ([Location 4489](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4489))
- First, it requires a DHCP server on the current network. ([Location 4494](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4494))
- The DHT11 communication protocol is slightly complicated. The data pin is normally at a logical high. ([Location 4499](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4499))
- The timing of the data is the complicated part. The difference between a 1 and a zero is the amount of time that the data line remains high; 24 µs means a zero, and 70 µs means a 1, ([Location 4504](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4504))
- while(digitalRead(DHTPin) == LOW) 99   { 100     if (--loopCnt == 0) return NAN; 101   } ([Location 4553](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4553))
- if ((micros() - t) > 40) data[idx] |= mask; 131     mask >>= 1; ([Location 4562](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4562))
- Both portions of the sketch have a time-out; if 255 cycles have passed, the sketch reports a time out. The 255 cycles correspond to more than 80 µs, so if the time out occurs, there was indeed a problem; the ACK wasn't sent. ([Location 4624](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4624))
- The Arduino can't tell exactly when the pulse started and when it stopped, but it can guess closely. The easiest thing to do is to split the values: say, 40 µs. If the pulse were calculated as lasting more than 40 µs, the DHT11 sent a logical one; otherwise, it sent a logical zero. This is done on line 131. ([Location 4635](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4635))

### Chapter 11 LiquidCrystal ([Location 4695](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4695))
- By creating a simple matrix of 5 x 7 points, every single letter in the Latin alphabet can be displayed, and this even works on other alphabets. ([Location 4758](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4758))
- The Arduino LiquidCrystal library has been designed specifically for one controller: the Hitachi HD44780. ([Location 4766](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4766))
- Some applications will write only to the LCD screen, in which case the R/W pin can be omitted. Otherwise, it must be connected to the LCD's R/W pin. ([Location 4782](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4782))
- It is indeed “faster” to send a single 8-bit message instead of two 4-bit messages, but with more than 90 percent of alphanumeric LCD screens, speed is not an issue. ([Location 4789](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4789))
- They have a relatively low refresh rate, meaning that it is possible to send an entire 2 x 16 message to the LCD screen before it has time to refresh the screen, even when using 4-bit mode. ([Location 4790](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4790))
- To create custom characters, an array of binary data must be created. This data is arranged in eight lines of 5-bit binary data, ([Location 4897](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4897))
- Example Program ([Location 4913](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4913))
- For this example, you build a distance sensor: a small device that displays the distance of the closest object to the device. ([Location 4913](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4913))
- the SainSmart LCD Keypad shield already has: a keypad. ([Location 5058](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5058))

### Chapter 12 SD ([Location 5070](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5070))
- CD drives offered a solution, the medium is capable of storing 650 to 700 MB of data. ([Location 5124](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5124))
- The first commercial product could hold 8 MB of data, more than five times that of a floppy disk. ([Location 5137](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5137))
- USB 2.0 could transfer up to 35 MB/s; ([Location 5141](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5141))
- SD, short for Secure Digital, is an evolution over the previous MultiMediaCard standard. ([Location 5161](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5161))
- The standard insists that newer formats accept older cards, but the opposite is not true; some SD-compatible devices will not accept SD-HC cards, even if they can fit physically. ([Location 5179](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5179))
- To use a card's capacity, the system normally needs to use a filesystem. ([Location 5181](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5181))
- FAT has emerged as the most common filesystem. ([Location 5184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5184))
- FAT16 uses 16 bits to define sector entries (a method of storing file information) and is limited to 2 gigabyte partitions. FAT32 was released after this, and storage space was theoretically increased to 2 terabytes; ([Location 5186](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5186))
- Newer systems use the exFAT filesystem, a new but incompatible filesystem that allows huge storage capacity; in theory, up to 64 zettabytes. ([Location 5188](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5188))
- FAT32 has been surpassed technically by several filesystems, including exFAT and NTFS, but still remains in use for its simplicity. ([Location 5190](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5190))
- The code required to interact with a FAT32 filesystem is extremely small, making it ideal for embedded systems. ([Location 5192](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5192))
- Arduinos can use FAT16 and FAT32 filesystems but cannot use the newer, proprietary exFAT. ([Location 5212](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5212))
- The SD library will not work if the SS pin is not configured as an output. ([Location 5225](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5225))
- Arduinos communicate with SD card controllers using the SPI protocol. ([Location 5237](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5237))
- When reading and writing to a file, you will be using the File class, which inherits from Stream, just like Serial does. ([Location 5294](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5294))
- result = file.seek(position); This function attempts to set the file pointer to the value of position, ([Location 5312](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5312))
- The write() function is different. It can write data directly inside a file but will not insert data; it will overwrite any data present if not at the end of the file. ([Location 5343](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5343))
- Data is buffered; that is to say that when the sketch is told to save data, that data is not necessarily written to the SD card immediately. ([Location 5388](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5388))
- To force all data to be written to a file, use flush(). ([Location 5391](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5391))
- On SD cards, blocks are always 512 bytes. ([Location 5407](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5407))
- Example Program and Sketch ([Location 5412](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5412))
- For this application, you build a data-logging application. The aim is to understand how sunlight evolves during a day. For this, you will require several components, but the sensor in this application is a light dependent resistor, or LDR for short. ([Location 5412](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5412))
- on line 16, the Arduino's default Chip Select pin (digital pin 10) is set as an output. This is required for the SD library to work, even if the pin is not connected to your card. The SD library will fail without this. ([Location 5469](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5469))
- It is good practice to close a file when it is not needed, and it forces data to be flushed to the SD card. ([Location 5488](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5488))

### Chapter 13 TFT ([Location 5503](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5503))
- Adafruit ST7735 TFT breakout board (available at http://www.adafruit.com/product/358 ([Location 5519](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5519))
- You can find the code download for this chapter at http://www.wiley.com/go/arduinosketches on the Download Code tab. The ([Location 5523](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5523))
- TFT, short for Thin Film Transistor, is another technology for displays. ([Location 5555](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5555))
- The ST7735 is an integrated circuit that can drive small-sized TFT displays (128 x 160 pixels in size). ([Location 5558](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5558))
- The primary difference between the Arduino and Adafruit libraries has to do with the way drawing commands are called. The Arduino TFT library tries to emulate the processing programming language for its commands. It “talks” via the SPI bus and is simple to use. ([Location 5569](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5569))
- It requires at least three pins: CS, DC, and RESET. The DC pin is for Data/Command and tells the controller if the information being sent is data or a command. ([Location 5579](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5579))
- screen does not display colors with full 8-bit colors per channel. The red and blue values are scaled to 5 bits (32 steps each), while the green is scaled to 6 bits (64 steps). ([Location 5616](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5616))
- The origin or coordinate 0,0 is the top-left corner of a screen. ([Location 5629](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5629))
- text written to the TFT screen does not wrap automatically. ([Location 5635](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5635))
- To define the color of points and lines, use stroke(): ([Location 5681](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5681))
- If you were creating a weather station with graphic icons on an LCD screen, ([Location 5697](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5697))
- It is much easier to use a ready-made image file to load and display on the screen. The TFT library can do this off of an SD card. ([Location 5698](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5698))
- Example Application ([Location 5729](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5729))
- It is time to take that example a little further and to create a visual data logger application. Just how much light is there outside? And what is the temperature? Now you can put that together visually on a TFT screen. ([Location 5730](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5730))
- The screen used in this example is the Adafruit ST7735 breakout board. ([Location 5736](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5736))
- the breakout board also has a micro-SD ([Location 5739](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5739))
- The sketch that you will be using to start off with is shown in Listing 13.1. ([Location 5754](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5754))
- Have we reached the edge of the screen? ([Location 5773](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5773))
- tempVal.toCharArray(tempPrintout, 4); ([Location 5784](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5784))
- The sketch looks for a file called bg.bmp in the root directory of the SD card. If it finds the image, it places it into the PImage object backgroundIMG. ([Location 5811](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5811))
- The screen is 128 pixels high, and the graph takes up the lower portion of the screen, so 64 is an excellent maximum. The ideal function to do this is map(). ([Location 5818](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5818))
- On line 72, a line is drawn on the screen. The first set of arguments are the x and y starting coordinates of the line, and the second set of coordinates is screen and y-end coordinates of the line. ([Location 5824](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5824))

### Chapter 14 Servo ([Location 5851](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5851))
- To know the exact position, servo motors can use a wide variety of techniques. Most use a potentiometer, using electrical resistance to understand how far the arm has turned, while more advanced systems use a coded optical wheel to get precise information. ([Location 5874](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5874))
- They are used in industrial systems to open and close valves; they are still used on radar or tracking equipment to point a device in the right direction with a high level of precision; and robots use servo motors to keep arms at a precise angle, while providing enough force to keep the arm in place with a high load. ([Location 5881](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5881))
- they are used to control steering. ([Location 5884](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5884))
- A servo expects a pulse every 20 milliseconds. The length of the pulse instructs the servo motor to move to a specific angle. The ([Location 5894](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5894))
- Using the Servo library automatically disables PWM operations on pins 9 and 10. ([Location 5902](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5902))
- The Arduino can normally directly supply power to a servo motor, but when using several servo motors, you need to separate the Arduino power supply to the servo power supply to avoid brown outs. ([Location 5910](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5910))
- By default, Arduino uses 544 microseconds as the minimum pulse length (equivalent to 0 degrees) and 2,400 microseconds as the maximum pulse width (equivalent to 180 degrees). If your servo motor has different settings for a maximum and minimum pulse, you can change the values in attach() by specifying the durations in microseconds. ([Location 5923](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5923))
- It does, however, keep the last angle that it was instructed to use, and this value can be fetched with read(): ([Location 5943](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5943))
- servo motors can receive only instructions and not return information. The value returned by read() is the value inside the Arduino. ([Location 5947](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5947))
- It can be helpful to set a servo motor to a default position before starting your application. ([Location 5949](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5949))
- You can still respond to interrupts, and timing functions such as millis() still work, but remember that the end of a servo motor pulse can be lengthened by the time it takes to execute an interrupt handler. ([Location 5977](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5977))
- If your interrupt handler takes 200 microseconds to complete and is called close to the end of a servo's pulse, in the worst case, the pulse sent to the servo motor can be lengthened by 200 microseconds, meaning that the resulting angle is not what you expected. ([Location 5979](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5979))
- Example Application ([Location 5984](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5984))
- this section uses a servo motor to create a retro-style thermometer. ([Location 5985](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5985))
- the LM35 will never output 5 volts. ([Location 5997](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5997))
- the Arduino can be told to sample between 0 and 1.1 volts. You do this by calling analogReference (INTERNAL). ([Location 6000](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6000))
- If using the INTERNAL constant, this sketch will not run correctly on an Arduino Mega; it will require changing. ([Location 6002](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6002))
- By using a reference of 1.1 V, the 10-bit ADC will have a sampling precision of 1.1 divided by 1,024, or 1.07 mV. The LM35 outputs 10 mV per degree, so 10 divided by 1.07 is approximately 9.31. So, a change of 9.31 in the analog reading equals 1 degree. To get a reading in Celsius, simply get the return value and divide by 9.31. ([Location 6005](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6005))
- because it “translates” a 50-unit range to a 90-unit range, it will lose a little precision. If you need more precision, you will have to look at another way of controlling the servo motor. Try using writeMicroseconds() for greater accuracy. ([Location 6073](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6073))
- map() specifies values between 0 and 50, and will “map” them to values between 45 and 135, but this does not mean that values are limited. ([Location 6077](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6077))

### Chapter 15 Stepper ([Location 6089](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6089))
- You can find the code downloads for this chapter at http://www.wiley.com/go/arduinosketches on the Download Code tab. The code is in ([Location 6097](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6097))
- Stepper motors are different. They have several coils inside, and the internal axle is “toothed.” When applying current to one of the coils, the closest “tooth” is attracted to the coil, and the axle moves by a few degrees. Current is then removed from the coil and sent through another coil, again attracting a tooth and moving the axle by a few degrees. ([Location 6106](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6106))
- the motor feeding the paper into the printer is a stepper motor. ([Location 6115](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6115))
- the belt used to attach the printer head assembly is also controlled by a stepper motor. ([Location 6116](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6116))
- Stepper motors have several characteristics, but the most important one is the angle per “step.” ([Location 6117](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6117))
- Stepper motors come in different sizes, and more important, different power ranges. ([Location 6123](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6123))
- stepper motors tend to require higher current than what a microcontroller can provide. ([Location 6125](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6125))
- An H-Bridge is one type of component that can help use a stepper. ([Location 6126](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6126))
- stepper motors are composed of two or more electromagnet coils driven in sequence, ([Location 6136](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6136))
- It is still possible to vary the motor speed by changing the frequency of the inputs, and stepper motors can still achieve relatively fast rotation speeds. ([Location 6139](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6139))
- Unipolar Versus Bipolar Stepper Motors ([Location 6141](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6141))
- Unipolar stepper motors have coils with a center tap, an electrical connection in the middle of the coil. ([Location 6142](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6142))
- instead of inverting current, the center tap can be used as a grounding point for the current, and one pole or the other can be powered, ([Location 6143](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6143))
- Bipolar motors do not have a center tap; instead, the hardware must be used to invert current. ([Location 6146](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6146))
- Bipolar motors do present a major advantage; because they have simplified coils, they can often achieve more torque for the same weight. ([Location 6147](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6147))
- The Arduino IDE has built-in support for stepper motors through the Stepper library. ([Location 6154](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6154))
- Stepper(steps, pin1, pin2); ([Location 6159](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6159))
- The steps parameter is an int which indicates the number of steps that your motor must make to complete one revolution. ([Location 6160](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6160))
- The pin1 and pin2 parameters are digital output pins used for two lead stepper motors. The pin3 and pin4 parameters are used for motors with four leads. ([Location 6162](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6162))
- Stepper.setSpeed(rpm); ([Location 6169](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6169))
- configures the output sequence to make the motor turn at the specified speed in revolutions per minute. ([Location 6171](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6171))
- to instruct the motor to move by a specific amount of steps: ([Location 6173](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6173))
- Stepper.step(steps); ([Location 6174](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6174))
- This function does not return until the task is complete, and depending on the amount of steps to perform, this can take a long time. ([Location 6178](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6178))
- Example Project ([Location 6181](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6181))
- A stepper motor can maintain its position and provide force to keep the angle correctly positioned. ([Location 6184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6184))
- A stepper motor cannot know its exact position; an order is given to move a certain number of steps in one direction or another, but it cannot know if the motor shaft has turned correctly. ([Location 6185](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6185))

### Chapter 16 Firmata ([Location 6233](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6233))
- Firmata is a protocol that communicates between computers and microcontrollers to easily access the Arduino hardware from software on a host machine. ([Location 6251](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6251))
- Messages are sent serially to and from the host computer, indicating pin status or requesting a pin to change state. ([Location 6253](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6253))
- To send the maximum amount of information in the minimum packet size, multiple pins are sent in a single message. ([Location 6280](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6280))
- Firmata works by using a system of callbacks, ([Location 6311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6311))
- Callbacks are put in place using an attach function; in the case of the Firmata library, it is called attach(): ([Location 6314](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6314))
- pinValue = (byte) value & (1 << i); ([Location 6358](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6358))
- SysEx ([Location 6376](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6376))
- Short for System Excusive, SysEx was originally used in synthesizers using the MIDI protocol to include custom commands. ([Location 6377](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6377))
- In the Firmata protocol, it allows users to exchange information such as I2C bus data and the servo motor configuration. ([Location 6381](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6381))
- The Arduino IDE has an excellent sketch that lets you begin working with Firmata: the StandardFirmata program. ([Location 6428](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6428))
- The sketch then has a clever technique to make sure that the wanted sampling rate is maintained. ([Location 6458](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6458))
- If the value of currentMillis minus previousMillis is larger than samplingInterval, previousMillis is increased by the value contained in samplingInterval, ([Location 6468](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6468))

### Chapter 17 GSM ([Location 6478](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6478))
- The first generation of mobile communications, known as 1 G, was a simple technology that allowed full-duplex voice communication ([Location 6522](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6522))
- The GSM name would later be known as Global System for Mobile Communication, ([Location 6528](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6528))
- SMS is not the only data transfer technique used by the GSM network; two other major systems exist. ([Location 6543](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6543))
- GPRS, short for General Packet Radio Service, is a packet-based data exchange technique. ([Location 6545](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6545))
- Although most GSM connections were circuit-switched (meaning that a connection was established and then terminated when the connection was cut), GPRS introduced a packet-switching technique, allowing operators to charge clients by the quantity of data used, and not the time spent transferring data. ([Location 6546](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6546))
- EDGE, short for Enhanced Data rates for GSM Evolution, is an enhancement over the previous GPRS data connection method. With a theoretical max speed of 250 Kbit/s, ([Location 6551](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6551))
- 3 G allows for higher data speeds than previous standards, ranging from 2 Mbit/s all the way to 28 Mbit/s. ([Location 6556](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6556))
- 4 G is currently the most advanced technology readily available, with extremely high speeds exceeding 50 Mbit/s. ([Location 6561](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6561))
- Modems ([Location 6565](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6565))
- A modem (short for modulator-demodulator) is a device that can send and receive digital data through an analog carrier. ([Location 6566](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6566))
- Modems are serial devices, and most were instructed to operate using the Hayes command ([Location 6571](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6571))
- Bluetooth does not connect through telephone lines, but the modem principle is the same; a digital device transmits digital data over an analog medium—in this case, radio waves. ([Location 6578](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6578))
- Arduino and GSM ([Location 6582](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6582))
- There are multiple ways to connect to devices wirelessly and exchange information: Wi-Fi, Bluetooth, and Zigbee to name but a few. ([Location 6583](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6583))
- but there is no wireless infrastructure as extensive and as widely used as the mobile telephone network. ([Location 6585](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6585))
- GSM devices are often power-hungry and usually require an external power supply. USB ports that supply 500 mA cannot keep a GSM shield powered under heavy load; these devices often require a power supply between 700 and 1,000 mA. ([Location 6598](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6598))
- the GSM library is complex, its different usage is separated into classes. There are classes to manage GPRS connections: SMS messages, and voice calls, to name but a few. ([Location 6640](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6640))
- GSM connections are sometimes unstable; network coverage may not be available in some locations (for example, inside a building or under a bridge). ([Location 6834](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6834))
- To know if a command were successfully executed, use the ready() function: ([Location 6835](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6835))
- Example Application ([Location 6857](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6857))
- Most security devices use a home's Wi-Fi connection, but these devices are vulnerable to attack. For this reason, many security systems also have a backup GSM system, allowing devices to communicate even if the physical line to the Internet is severed. ([Location 6858](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6858))
- On line 12, the different objects are created: ([Location 6908](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6908))
- The setup() function is declared on line 20. The serial connection is configured on line 23, and on line 26 the variable notConnected is set to true. As long as this variable is true, a while loop attempts to attach to the GPRS network, with the attachGPRS() function on line 33. ([Location 6911](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6911))
- sendWarningSMS(). This function will send an SMS message to the specified contact. ([Location 6917](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6917))
- The loop() function is declared on line 49. It starts with a for() loop and iterates 600 times. Each loop will start by waiting for a second, and then looking at the state of the digital input on pin 8. If the result is false, that means that the reed switch has been activated, and the variable intrusion is set to true before calling the sendWarningSMS() function. ([Location 6920](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6920))
- Once this loop iterates 600 times, or close to 10 minutes, the sketch will attempt to connect to a server. If the connection is ([Location 6924](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6924))
- Part I Device-Specifi c Libraries ([Location 6936](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6936))
- hardware needed to use the examples in this chapter includes: Arduino Due Ethernet Shield (Arduino, SainSmart, etc.) ([Location 6950](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6950))
- Because Arduinos are designed to be single-task devices, no multitasking library was originally created. ([Location 7304](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7304))
- Some libraries allow something called a callback; ([Location 7305](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7305))
- The hardware needed to use these functions includes: Arduino Due ([Location 7553](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7553))
- The PS/2 interface was designed for simplicity. Each computer had one keyboard and one mouse. ([Location 7577](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7577))
- There were two connectors on computer mainboards: one purple port for keyboards and one green port for mice. ([Location 7579](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7579))
- They were mini-DIN connectors. ([Location 7580](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7580))
- To simplify everything, Universal Serial Bus (USB) was created, ([Location 7585](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7585))
- USB Protocol ([Location 7590](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7590))
- For USB to work, it requires at least one USB host. This is the device that controls USB devices, and USB devices communicate with the host. For a standard PC setup, the PC is the USB host. ([Location 7590](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7590))
- Sometimes drivers are needed to fully use a USB device; some devices do not require drivers because the computer already knows what the device's function ([Location 7594](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7594))
- USB On-The-Go is an extension to the USB specification, allowing devices to act as either a master (host) or slave (peripheral). Technically, all USB OTG devices are masters, but when connected to another master, they can act as a slave. ([Location 7607](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7607))
- A mobile phone can therefore be connected to a computer or to a USB drive. ([Location 7610](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7610))
- Some devices are intelligent and can communicate with a master, specifying their USB class and their capabilities. ([Location 7614](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7614))
- Some have no built-in intelligence and simply use the +5-V power supply that the USB bus supplies; ([Location 7615](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7615))
- The Arduino Due is different ([Location 7649](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7649))
- The USB connector adjacent to the power barrel, the Programming port, is a USB serial connector that is connected to an ATmega16U2 microcontroller which handles serial communication between the Arduino Due's main processor and the host computer. ([Location 7655](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7655))
- The other USB connector, the Native port, is connected directly to the SAM3X8E ([Location 7657](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7657))
- the Due has full control of this USB port, and can be connected as a slave for native serial communication. ([Location 7658](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7658))
- The Arduino Due can use the USBHost library, a powerful library containing routines to use keyboards and mice as input devices, but it does come at a cost. USB drivers tend to be big. ([Location 7664](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7664))
- Remember, waiting for USB events can block the system for up to 5 seconds, so these routines will not be called all the time. ([Location 7788](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7788))

### Chapter 21 Esplora ([Location 7858](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7858))
- The Esplora is an excellent device for users who do not want to get too involved in electronics because it integrates an amazing amount of peripherals. ([Location 7885](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7885))
- The Arduino Esplora is designed to be held in your hand and has the look and feel of a console game pad. ([Location 7896](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7896))

### Chapter 23 Bridge ([Location 8538](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8538))
- A microcontroller (as the name implies) controls, whereas a microprocessor processes data. ([Location 8562](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8562))
- This becomes apparent for the Arduino Yún, where both are present. ([Location 8563](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8563))
- In December 2002, Linksys released its WRT54G residential wireless router. ([Location 8564](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8564))
- It was an easy way to add high-speed Wi-Fi to a home network ([Location 8565](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8565))
- These devices were based on a 125-MHz MIPS microprocessor with surprisingly good characteristics. With 16 MB of RAM and 4 MB of flash memory, ([Location 8568](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8568))
- The Linux distribution was delivered under the GPL license, and as such, Linksys had to make the source code available on its site. This sparked a group of people to look at that code, and to modify it, allowing more and more features to be added. ([Location 8570](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8570))
- An entire generation of routers were designed around this initial product, and the new firmware was released under the name OpenWRT. ([Location 8575](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8575))
- The power of OpenWRT was not only that it added advanced features, but it also contained a package manager, meaning users could install their own programs. The filesystem is also read/write-capable, ([Location 8576](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8576))
- One device to which the OpenWRT has been ported is the Arduino Yún. ([Location 8580](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8580))
- This board is actually two devices in one; on one side, it has an ATMega32u4, which is the “Arduino” side. The other side is based on an Atheros AR9331. This chip, with its corresponding RAM, Ethernet, and Wi-Fi chip, hosts an OpenWRT distribution called Linino. ([Location 8581](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8581))
- To allow the AVR to communicate with the Atheros, a library was created: Bridge. ([Location 8583](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8583))
- The Bridge class is a simple way to transfer data to and from the Linux side, ([Location 8627](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8627))
- The Process class runs and manages applications running on Linux. ([Location 8629](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8629))
- The Arduino Yún has an integrated micro-SD slot, allowing users to expand the filesystem. This card is handled by Linux, but the FileIO library provides a convenient way to interact with files ([Location 8686](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8686))
- The YunServer class is used when creating a server on the Arduino Yún's Linux distro. This allows the Arduino side of the Yún to receive requests and to answer those requests. ([Location 8737](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8737))
- when incoming connections arrive, they will be routed through the Linux processor, leaving the AVR microcontroller side of the Arduino free to do what it does best—control your sketches. To do this, use listenOnLocalhost(): ([Location 8744](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8744))
- The difference between the Arduino Yún and other models using Ethernet or Wi-Fi shields is the multitasking capacity. ([Location 8751](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8751))
- Example Application ([Location 8773](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8773))
- In Chapter 12, you created a light sensor that was capable of logging data to an SD card. In this chapter, you again use a light sensor, but one that can log the temperature to a data file with a timestamp and that can be read over a wireless connection. ([Location 8774](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8774))
- getTimeStamp() is declared on line 74. When it runs, it creates an instance of the Process class. It also creates a variable called result; this is the variable that holds the result of a Linux command. This command runs inside a process called time. The function that it calls is named date; when executing the date command, it returns something like this: ([Location 8825](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8825))
- This sketch is the basis for a compact sensor, and together with a temperature sensor and barometer, it can be used to create a wireless weather station. ([Location 8853](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8853))
- Part IV User Libraries and Shields ([Location 8862](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8862))
- Example Application ([Location 8997](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8997))
- The Si1145 from Silicon Labs is a digital UV sensor. Targeted for the wearable market, it is compact, light, and ultra-low-powered. It is a highly professional solution, but like most professional solutions, it does come at a price. That price is configuration. ([Location 8999](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8999))

### Chapter 25 Creating Your Own Shield ([Location 9115](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9115))
- The component that you use for this project is the PCF8574AP. This component is an 8-bit I/O expander, capable of adding eight input and output pins to an I2C bus. ([Location 9184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9184))
- The Arduino already has a built-in I2C bus, so no other components are required. ([Location 9185](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9185))
- 3.3 V and 5 V. This shield will be compatible with both types of Arduino, without the need to add voltage-shifting hardware. ([Location 9199](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9199))
- Quasi-bidirectional pins can sink a rather large amount of current (tens of milli-amps, more than enough for an LED) but can source only a small amount of current (sometimes tens of micro-amps). ([Location 9205](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9205))
- In the case of a short circuit, the device simply limits the current, as if a large resistor was placed in the circuit. ([Location 9206](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9206))
- the disadvantage is that this pin cannot be used to power all components; ([Location 9208](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9208))
- Pin 16 is VDD, supply voltage, and pin 8 is VSS, supply ground. This is a common layout for integrated circuits. ([Location 9232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9232))
- set the addresses of the two integrated circuits. Pins 1, 2, and 3 are used for the address. For this example, device 0 (on the left) will use 000b (all low), and device 1 (on the right) will use b001; that is, A0 and A1 will be low, and A2 will be high. ([Location 9239](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9239))
- The SAMA5D3 is one example of a processor that can run a full Linux or Android system, but with Arduino shields. ([Location 9335](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9335))

### Chapter 26 Creating Your Own Library ([Location 9344](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9344))
- Now it is time to write the constructor. This function would be included in TrafficLight.cpp: ([Location 9489](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9489))
- Boolean TrafficLight::begin(void) ([Location 9516](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9516))
- class TrafficLight {   private:     uint8_t _redpin, _amberpin, _greenpin;   public:     TrafficLight(uint8_t redpin, uint8_t amberpin, uint8_t greenpin);     void begin();     void red();     void amber();    void green(); }; ([Location 9546](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9546))
- Use Standard Names ([Location 9611](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9611))
- Most hardware-related drivers use a begin() function in their code. ([Location 9612](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9612))
- if obtaining data, always use read: readInput()or readStatus(). When outputting, use write: writeData(). ([Location 9614](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9614))
- the header file should contain. It will look something like this (filename: PCF8574AP.h): ([Location 9668](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9668))
- The trick comes in separating a word into 2 bytes; this is done with masks and shifts. The first conversion transforms a word into a byte, ([Location 9746](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9746))

## Highlights
- Interrupts ([Location 2185](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2185))
- Table 4.1 Interrupt Pins on Arduinos ([Location 2206](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2206))
- The Arduino Due is different. It has highly advanced interrupt handling and can effectively be programmed to interrupt on every digital pin. ([Location 2223](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2223))
- Chapter 5 Serial Communication ([Location 2260](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2260))
- RS-232 serial ports were a standard feature on computers allowing users to connect mice, modems, and other peripherals using a common connector. ([Location 2293](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2293))
- The original serial ports have been removed from most modern computers in favor of a new standard: USB. ([Location 2296](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2296))
- USB does not use RS-232, ([Location 2298](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2298))
- It can, however, connect to RS-232 hardware using a special converter, ([Location 2298](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2298))
- RS-232 low-capacitance cables can be 1,000 feet long, although most cables limit the distance to 50 feet. ([Location 2311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2311))
- USB also has the advantage of auto-configuring most of the parameters. ([Location 2314](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2314))
- The USB communication is sent to Arduino pins 0 and 1, meaning that those pins are reserved if your device must communicate with a computer. ([Location 2315](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=2315))

### Chapter 9 Ethernet ([Location 3747](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3747)) - previous
- In 1973, the Ethernet standard was proposed in Xerox PARC. It was commercially introduced in 1980 and standardized in 1983. ([Location 3777](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3777))
- Ethernet describes the physical connection between two or more computers; the electronic signaling between devices, and the physical format of the cables. ([Location 3781](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3781))
- A switch is a network device that receives packets of data and can inspect that packet to know where it is supposed to go. When it has that information, it sends that packet to the correct port—and only to that port. ([Location 3806](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3806))
- Ethernet is a physical means of connecting computers together in small or large networks, but to allow programs to talk to each other, an application layer is required. The most commonly used is TCP/IP. ([Location 3819](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3819))
- The MAC address is the hardware address of the network connector. ([Location 3824](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3824))
- IP addresses are made out of 4 bytes. Normally, the first 3 bytes are the network, and the fourth is the machine on that network. The network 192.168.0.XXX is an “internal” network, one that is shielded from the Internet. ([Location 3830](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3830))
- To connect to a server (a machine that will provide a service), a client (something that requires this service) requires two things: the address of the server (or a domain name that will later be converted to an IP address) and a port. It is not something physical; it is represented only in software. ([Location 3846](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3846))
- A server program creates a port, and a client connects to that port. Some ports are standard; others are created randomly. A web server will always be opened on port 80, and your Internet browser will automatically attempt to connect to port 80 when you add an Internet address beginning with http. When using secure HTTP, the browser connects to port 443. ([Location 3852](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3852))
- Most Arduinos do not come with Ethernet support. The Arduino Ethernet is an exception; ([Location 3861](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=3861))
- Example Program ([Location 4148](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4148))
- For this program, you use an Arduino Uno with an Ethernet shield. This is a continuation of the previous chapter and still uses the light sensor. You can now read light conditions in real time by connecting to your Arduino from a web browser. ([Location 4149](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4149))

### Chapter 10 WiFi ([Location 4197](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4197)) - previous
- The WiFi Protocol ([Location 4232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4232))
- Wi-Fi standard devices use a wireless local area network (LAN). ([Location 4232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4232))
- In 1985, the U.S. Federal Communication Commission opened up part of the wireless spectrum for unlicensed use. The original wireless protocol was called WaveLAN, developed by NCR for cashier systems. ([Location 4235](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4235))
- Its successor, 802.11, was created in 1997. It had a data-rate of either 1 or 2 megabits per second and a communications distance of 60 feet. ([Location 4238](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4238))
- The original 802.11 was not widely embraced, but a new version was: 802.11b. ([Location 4240](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4240))
- 802.11b gave much faster data rates: 1, 2, 5.5, and 11 megabits per second. Although these speeds were good for browsing the web, they were not fast enough for video streaming or heavy data transfer. ([Location 4243](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4243))
- 802.11g proposed data rates of up to 55 Mbit/s, ([Location 4244](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4244))
- 802.11n can go as fast as 150 Mbit/s; 802.11ac can go up to 866.7 Mbit/s; and 802.11ad can transfer data at a staggering 6.75 Gbit/s. ([Location 4246](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4246))
- Topology ([Location 4247](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4247))
- Ad-hoc mode is an unmanaged, decentralized mode. Wireless peers are free to connect to other peers, and the network is managed by all the peers. ([Location 4249](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4249))
- Infrastructure mode is a managed mode. This topology requires one or several devices to “manage” the network, allowing peers to connect to ([Location 4254](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4254))
- Wi-Fi works with two base frequencies: 2.4 GHz and 5 GHz. However, in practice, there are several frequencies; the 2.4-GHz band operates from 2.412 GHz all the way to 2.484 GHz. ([Location 4265](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4265))
- Also, Wi-Fi is not the only wireless technology to use the 2.4 GHz band. For example, Bluetooth also uses these frequencies. ([Location 4268](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4268))
- To help, Wi-Fi uses channels. A channel is a specific frequency used by one particular wireless network. ([Location 4269](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4269))
- Encryption ([Location 4275](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4275))
- There are two forms of encryption: WEP and WPA2. ([Location 4282](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4282))
- RSSI is short for Received Signal Strength Indication and is an indication of signal strength. The units are arbitrary; some devices report signal strength as a percentage, others as a unit called dBm, or decibels per milliwatt of power. ([Location 4295](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4295))
- Arduino WiFi ([Location 4300](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4300))
- The WiFi library “talks” to the Wi-Fi shield through the SPI bus, and communication is normally handled with a small microcontroller, “translating” messages on the SPI bus to the network controller. ([Location 4301](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4301))
- The WiFi library uses the SPI bus and requires the SPI pins to be free. It uses pins 11, 12, and 13 on the Arduino Uno, and 50, 51, and 52 for the Arduino Mega. Pin 10 is used as a Slave Select pin, and pin 7 is used as a digital handshake; these pins should not be used by the rest of the sketch. ([Location 4309](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4309))
- The WiFi library methods are similar to those in the Ethernet library, and many of the functions are identical— ([Location 4311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4311))
- Example Application ([Location 4475](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4475))
- The DHT11 is a popular temperature and humidity sensor; it ([Location 4478](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4478))
- The DHT11 does have something unique. ([Location 4484](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4484))
- There is one wire used to send and to receive data, in addition to a power and ground. ([Location 4486](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4486))
- The downside to this component is that you can make only one reading every 2 seconds, ([Location 4487](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4487))
- This application uses an Arduino Uno and a SainSmart wireless shield. A DHT11 sensor will be connected to the board, allowing the user to get an accurate reading. Because I'm terrible with plants, I probably won't check the reading frequently, so this device must communicate with the outside world to send alerts. It will monitor the humidity of the dirt and send e-mails when the humidity level drops below a certain level. For this, it must be connected to the Internet. Because I don't have a wired access point nearby, I'll be using a wireless network. ([Location 4489](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4489))
- First, it requires a DHCP server on the current network. ([Location 4494](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4494))
- The DHT11 communication protocol is slightly complicated. The data pin is normally at a logical high. ([Location 4499](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4499))
- The timing of the data is the complicated part. The difference between a 1 and a zero is the amount of time that the data line remains high; 24 µs means a zero, and 70 µs means a 1, ([Location 4504](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4504))
- while(digitalRead(DHTPin) == LOW) 99   { 100     if (--loopCnt == 0) return NAN; 101   } ([Location 4553](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4553))
- if ((micros() - t) > 40) data[idx] |= mask; 131     mask >>= 1; ([Location 4562](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4562))
- Both portions of the sketch have a time-out; if 255 cycles have passed, the sketch reports a time out. The 255 cycles correspond to more than 80 µs, so if the time out occurs, there was indeed a problem; the ACK wasn't sent. ([Location 4624](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4624))
- The Arduino can't tell exactly when the pulse started and when it stopped, but it can guess closely. The easiest thing to do is to split the values: say, 40 µs. If the pulse were calculated as lasting more than 40 µs, the DHT11 sent a logical one; otherwise, it sent a logical zero. This is done on line 131. ([Location 4635](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4635))

### Chapter 11 LiquidCrystal ([Location 4695](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4695)) - previous
- By creating a simple matrix of 5 x 7 points, every single letter in the Latin alphabet can be displayed, and this even works on other alphabets. ([Location 4758](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4758))
- The Arduino LiquidCrystal library has been designed specifically for one controller: the Hitachi HD44780. ([Location 4766](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4766))
- Some applications will write only to the LCD screen, in which case the R/W pin can be omitted. Otherwise, it must be connected to the LCD's R/W pin. ([Location 4782](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4782))
- It is indeed “faster” to send a single 8-bit message instead of two 4-bit messages, but with more than 90 percent of alphanumeric LCD screens, speed is not an issue. ([Location 4789](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4789))
- They have a relatively low refresh rate, meaning that it is possible to send an entire 2 x 16 message to the LCD screen before it has time to refresh the screen, even when using 4-bit mode. ([Location 4790](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4790))
- To create custom characters, an array of binary data must be created. This data is arranged in eight lines of 5-bit binary data, ([Location 4897](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4897))
- Example Program ([Location 4913](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4913))
- For this example, you build a distance sensor: a small device that displays the distance of the closest object to the device. ([Location 4913](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=4913))
- the SainSmart LCD Keypad shield already has: a keypad. ([Location 5058](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5058))

### Chapter 12 SD ([Location 5070](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5070)) - previous
- CD drives offered a solution, the medium is capable of storing 650 to 700 MB of data. ([Location 5124](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5124))
- The first commercial product could hold 8 MB of data, more than five times that of a floppy disk. ([Location 5137](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5137))
- USB 2.0 could transfer up to 35 MB/s; ([Location 5141](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5141))
- SD, short for Secure Digital, is an evolution over the previous MultiMediaCard standard. ([Location 5161](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5161))
- The standard insists that newer formats accept older cards, but the opposite is not true; some SD-compatible devices will not accept SD-HC cards, even if they can fit physically. ([Location 5179](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5179))
- To use a card's capacity, the system normally needs to use a filesystem. ([Location 5181](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5181))
- FAT has emerged as the most common filesystem. ([Location 5184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5184))
- FAT16 uses 16 bits to define sector entries (a method of storing file information) and is limited to 2 gigabyte partitions. FAT32 was released after this, and storage space was theoretically increased to 2 terabytes; ([Location 5186](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5186))
- Newer systems use the exFAT filesystem, a new but incompatible filesystem that allows huge storage capacity; in theory, up to 64 zettabytes. ([Location 5188](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5188))
- FAT32 has been surpassed technically by several filesystems, including exFAT and NTFS, but still remains in use for its simplicity. ([Location 5190](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5190))
- The code required to interact with a FAT32 filesystem is extremely small, making it ideal for embedded systems. ([Location 5192](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5192))
- Arduinos can use FAT16 and FAT32 filesystems but cannot use the newer, proprietary exFAT. ([Location 5212](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5212))
- The SD library will not work if the SS pin is not configured as an output. ([Location 5225](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5225))
- Arduinos communicate with SD card controllers using the SPI protocol. ([Location 5237](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5237))
- When reading and writing to a file, you will be using the File class, which inherits from Stream, just like Serial does. ([Location 5294](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5294))
- result = file.seek(position); This function attempts to set the file pointer to the value of position, ([Location 5312](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5312))
- The write() function is different. It can write data directly inside a file but will not insert data; it will overwrite any data present if not at the end of the file. ([Location 5343](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5343))
- Data is buffered; that is to say that when the sketch is told to save data, that data is not necessarily written to the SD card immediately. ([Location 5388](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5388))
- To force all data to be written to a file, use flush(). ([Location 5391](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5391))
- On SD cards, blocks are always 512 bytes. ([Location 5407](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5407))
- Example Program and Sketch ([Location 5412](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5412))
- For this application, you build a data-logging application. The aim is to understand how sunlight evolves during a day. For this, you will require several components, but the sensor in this application is a light dependent resistor, or LDR for short. ([Location 5412](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5412))
- on line 16, the Arduino's default Chip Select pin (digital pin 10) is set as an output. This is required for the SD library to work, even if the pin is not connected to your card. The SD library will fail without this. ([Location 5469](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5469))
- It is good practice to close a file when it is not needed, and it forces data to be flushed to the SD card. ([Location 5488](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5488))

### Chapter 13 TFT ([Location 5503](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5503)) - previous
- Adafruit ST7735 TFT breakout board (available at http://www.adafruit.com/product/358 ([Location 5519](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5519))
- You can find the code download for this chapter at http://www.wiley.com/go/arduinosketches on the Download Code tab. The ([Location 5523](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5523))
- TFT, short for Thin Film Transistor, is another technology for displays. ([Location 5555](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5555))
- The ST7735 is an integrated circuit that can drive small-sized TFT displays (128 x 160 pixels in size). ([Location 5558](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5558))
- The primary difference between the Arduino and Adafruit libraries has to do with the way drawing commands are called. The Arduino TFT library tries to emulate the processing programming language for its commands. It “talks” via the SPI bus and is simple to use. ([Location 5569](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5569))
- It requires at least three pins: CS, DC, and RESET. The DC pin is for Data/Command and tells the controller if the information being sent is data or a command. ([Location 5579](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5579))
- screen does not display colors with full 8-bit colors per channel. The red and blue values are scaled to 5 bits (32 steps each), while the green is scaled to 6 bits (64 steps). ([Location 5616](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5616))
- The origin or coordinate 0,0 is the top-left corner of a screen. ([Location 5629](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5629))
- text written to the TFT screen does not wrap automatically. ([Location 5635](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5635))
- To define the color of points and lines, use stroke(): ([Location 5681](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5681))
- If you were creating a weather station with graphic icons on an LCD screen, ([Location 5697](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5697))
- It is much easier to use a ready-made image file to load and display on the screen. The TFT library can do this off of an SD card. ([Location 5698](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5698))
- Example Application ([Location 5729](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5729))
- It is time to take that example a little further and to create a visual data logger application. Just how much light is there outside? And what is the temperature? Now you can put that together visually on a TFT screen. ([Location 5730](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5730))
- The screen used in this example is the Adafruit ST7735 breakout board. ([Location 5736](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5736))
- the breakout board also has a micro-SD ([Location 5739](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5739))
- The sketch that you will be using to start off with is shown in Listing 13.1. ([Location 5754](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5754))
- Have we reached the edge of the screen? ([Location 5773](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5773))
- tempVal.toCharArray(tempPrintout, 4); ([Location 5784](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5784))
- The sketch looks for a file called bg.bmp in the root directory of the SD card. If it finds the image, it places it into the PImage object backgroundIMG. ([Location 5811](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5811))
- The screen is 128 pixels high, and the graph takes up the lower portion of the screen, so 64 is an excellent maximum. The ideal function to do this is map(). ([Location 5818](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5818))
- On line 72, a line is drawn on the screen. The first set of arguments are the x and y starting coordinates of the line, and the second set of coordinates is screen and y-end coordinates of the line. ([Location 5824](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5824))

### Chapter 14 Servo ([Location 5851](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5851)) - previous
- To know the exact position, servo motors can use a wide variety of techniques. Most use a potentiometer, using electrical resistance to understand how far the arm has turned, while more advanced systems use a coded optical wheel to get precise information. ([Location 5874](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5874))
- They are used in industrial systems to open and close valves; they are still used on radar or tracking equipment to point a device in the right direction with a high level of precision; and robots use servo motors to keep arms at a precise angle, while providing enough force to keep the arm in place with a high load. ([Location 5881](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5881))
- they are used to control steering. ([Location 5884](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5884))
- A servo expects a pulse every 20 milliseconds. The length of the pulse instructs the servo motor to move to a specific angle. The ([Location 5894](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5894))
- Using the Servo library automatically disables PWM operations on pins 9 and 10. ([Location 5902](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5902))
- The Arduino can normally directly supply power to a servo motor, but when using several servo motors, you need to separate the Arduino power supply to the servo power supply to avoid brown outs. ([Location 5910](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5910))
- By default, Arduino uses 544 microseconds as the minimum pulse length (equivalent to 0 degrees) and 2,400 microseconds as the maximum pulse width (equivalent to 180 degrees). If your servo motor has different settings for a maximum and minimum pulse, you can change the values in attach() by specifying the durations in microseconds. ([Location 5923](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5923))
- It does, however, keep the last angle that it was instructed to use, and this value can be fetched with read(): ([Location 5943](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5943))
- servo motors can receive only instructions and not return information. The value returned by read() is the value inside the Arduino. ([Location 5947](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5947))
- It can be helpful to set a servo motor to a default position before starting your application. ([Location 5949](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5949))
- You can still respond to interrupts, and timing functions such as millis() still work, but remember that the end of a servo motor pulse can be lengthened by the time it takes to execute an interrupt handler. ([Location 5977](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5977))
- If your interrupt handler takes 200 microseconds to complete and is called close to the end of a servo's pulse, in the worst case, the pulse sent to the servo motor can be lengthened by 200 microseconds, meaning that the resulting angle is not what you expected. ([Location 5979](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5979))
- Example Application ([Location 5984](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5984))
- this section uses a servo motor to create a retro-style thermometer. ([Location 5985](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5985))
- the LM35 will never output 5 volts. ([Location 5997](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=5997))
- the Arduino can be told to sample between 0 and 1.1 volts. You do this by calling analogReference (INTERNAL). ([Location 6000](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6000))
- If using the INTERNAL constant, this sketch will not run correctly on an Arduino Mega; it will require changing. ([Location 6002](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6002))
- By using a reference of 1.1 V, the 10-bit ADC will have a sampling precision of 1.1 divided by 1,024, or 1.07 mV. The LM35 outputs 10 mV per degree, so 10 divided by 1.07 is approximately 9.31. So, a change of 9.31 in the analog reading equals 1 degree. To get a reading in Celsius, simply get the return value and divide by 9.31. ([Location 6005](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6005))
- because it “translates” a 50-unit range to a 90-unit range, it will lose a little precision. If you need more precision, you will have to look at another way of controlling the servo motor. Try using writeMicroseconds() for greater accuracy. ([Location 6073](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6073))
- map() specifies values between 0 and 50, and will “map” them to values between 45 and 135, but this does not mean that values are limited. ([Location 6077](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6077))

### # Chapter 15 Stepper ([Location 6089](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6089)) - previous
- You can find the code downloads for this chapter at http://www.wiley.com/go/arduinosketches on the Download Code tab. The code is in ([Location 6097](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6097))
- Stepper motors are different. They have several coils inside, and the internal axle is “toothed.” When applying current to one of the coils, the closest “tooth” is attracted to the coil, and the axle moves by a few degrees. Current is then removed from the coil and sent through another coil, again attracting a tooth and moving the axle by a few degrees. ([Location 6106](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6106))
- the motor feeding the paper into the printer is a stepper motor. ([Location 6115](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6115))
- the belt used to attach the printer head assembly is also controlled by a stepper motor. ([Location 6116](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6116))
- Stepper motors have several characteristics, but the most important one is the angle per “step.” ([Location 6117](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6117))
- Stepper motors come in different sizes, and more important, different power ranges. ([Location 6123](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6123))
- stepper motors tend to require higher current than what a microcontroller can provide. ([Location 6125](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6125))
- An H-Bridge is one type of component that can help use a stepper. ([Location 6126](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6126))
- stepper motors are composed of two or more electromagnet coils driven in sequence, ([Location 6136](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6136))
- It is still possible to vary the motor speed by changing the frequency of the inputs, and stepper motors can still achieve relatively fast rotation speeds. ([Location 6139](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6139))
- Unipolar Versus Bipolar Stepper Motors ([Location 6141](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6141))
- Unipolar stepper motors have coils with a center tap, an electrical connection in the middle of the coil. ([Location 6142](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6142))
- instead of inverting current, the center tap can be used as a grounding point for the current, and one pole or the other can be powered, ([Location 6143](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6143))
- Bipolar motors do not have a center tap; instead, the hardware must be used to invert current. ([Location 6146](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6146))
- Bipolar motors do present a major advantage; because they have simplified coils, they can often achieve more torque for the same weight. ([Location 6147](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6147))
- The Arduino IDE has built-in support for stepper motors through the Stepper library. ([Location 6154](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6154))
- Stepper(steps, pin1, pin2); ([Location 6159](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6159))
- The steps parameter is an int which indicates the number of steps that your motor must make to complete one revolution. ([Location 6160](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6160))
- The pin1 and pin2 parameters are digital output pins used for two lead stepper motors. The pin3 and pin4 parameters are used for motors with four leads. ([Location 6162](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6162))
- Stepper.setSpeed(rpm); ([Location 6169](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6169))
- configures the output sequence to make the motor turn at the specified speed in revolutions per minute. ([Location 6171](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6171))
- to instruct the motor to move by a specific amount of steps: ([Location 6173](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6173))
- Stepper.step(steps); ([Location 6174](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6174))
- This function does not return until the task is complete, and depending on the amount of steps to perform, this can take a long time. ([Location 6178](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6178))
- Example Project ([Location 6181](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6181))
- A stepper motor can maintain its position and provide force to keep the angle correctly positioned. ([Location 6184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6184))
- A stepper motor cannot know its exact position; an order is given to move a certain number of steps in one direction or another, but it cannot know if the motor shaft has turned correctly. ([Location 6185](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6185))

### Chapter 16 Firmata ([Location 6233](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6233)) - previous
- Firmata is a protocol that communicates between computers and microcontrollers to easily access the Arduino hardware from software on a host machine. ([Location 6251](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6251))
- Messages are sent serially to and from the host computer, indicating pin status or requesting a pin to change state. ([Location 6253](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6253))
- To send the maximum amount of information in the minimum packet size, multiple pins are sent in a single message. ([Location 6280](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6280))
- Firmata works by using a system of callbacks, ([Location 6311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6311))
- Callbacks are put in place using an attach function; in the case of the Firmata library, it is called attach(): ([Location 6314](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6314))
- pinValue = (byte) value & (1 << i); ([Location 6358](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6358))
- SysEx ([Location 6376](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6376))
- Short for System Excusive, SysEx was originally used in synthesizers using the MIDI protocol to include custom commands. ([Location 6377](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6377))
- In the Firmata protocol, it allows users to exchange information such as I2C bus data and the servo motor configuration. ([Location 6381](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6381))
- The Arduino IDE has an excellent sketch that lets you begin working with Firmata: the StandardFirmata program. ([Location 6428](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6428))
- The sketch then has a clever technique to make sure that the wanted sampling rate is maintained. ([Location 6458](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6458))
- If the value of currentMillis minus previousMillis is larger than samplingInterval, previousMillis is increased by the value contained in samplingInterval, ([Location 6468](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6468))

### Chapter 17 GSM ([Location 6478](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6478)) - previous
- The first generation of mobile communications, known as 1 G, was a simple technology that allowed full-duplex voice communication ([Location 6522](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6522))
- The GSM name would later be known as Global System for Mobile Communication, ([Location 6528](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6528))
- SMS is not the only data transfer technique used by the GSM network; two other major systems exist. ([Location 6543](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6543))
- GPRS, short for General Packet Radio Service, is a packet-based data exchange technique. ([Location 6545](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6545))
- Although most GSM connections were circuit-switched (meaning that a connection was established and then terminated when the connection was cut), GPRS introduced a packet-switching technique, allowing operators to charge clients by the quantity of data used, and not the time spent transferring data. ([Location 6546](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6546))
- EDGE, short for Enhanced Data rates for GSM Evolution, is an enhancement over the previous GPRS data connection method. With a theoretical max speed of 250 Kbit/s, ([Location 6551](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6551))
- 3 G allows for higher data speeds than previous standards, ranging from 2 Mbit/s all the way to 28 Mbit/s. ([Location 6556](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6556))
- 4 G is currently the most advanced technology readily available, with extremely high speeds exceeding 50 Mbit/s. ([Location 6561](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6561))
- Modems ([Location 6565](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6565))
- A modem (short for modulator-demodulator) is a device that can send and receive digital data through an analog carrier. ([Location 6566](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6566))
- Modems are serial devices, and most were instructed to operate using the Hayes command ([Location 6571](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6571))
- Bluetooth does not connect through telephone lines, but the modem principle is the same; a digital device transmits digital data over an analog medium—in this case, radio waves. ([Location 6578](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6578))
- Arduino and GSM ([Location 6582](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6582))
- There are multiple ways to connect to devices wirelessly and exchange information: Wi-Fi, Bluetooth, and Zigbee to name but a few. ([Location 6583](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6583))
- but there is no wireless infrastructure as extensive and as widely used as the mobile telephone network. ([Location 6585](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6585))
- GSM devices are often power-hungry and usually require an external power supply. USB ports that supply 500 mA cannot keep a GSM shield powered under heavy load; these devices often require a power supply between 700 and 1,000 mA. ([Location 6598](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6598))
- the GSM library is complex, its different usage is separated into classes. There are classes to manage GPRS connections: SMS messages, and voice calls, to name but a few. ([Location 6640](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6640))
- GSM connections are sometimes unstable; network coverage may not be available in some locations (for example, inside a building or under a bridge). ([Location 6834](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6834))
- To know if a command were successfully executed, use the ready() function: ([Location 6835](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6835))
- Example Application ([Location 6857](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6857))
- Most security devices use a home's Wi-Fi connection, but these devices are vulnerable to attack. For this reason, many security systems also have a backup GSM system, allowing devices to communicate even if the physical line to the Internet is severed. ([Location 6858](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6858))
- On line 12, the different objects are created: ([Location 6908](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6908))
- The setup() function is declared on line 20. The serial connection is configured on line 23, and on line 26 the variable notConnected is set to true. As long as this variable is true, a while loop attempts to attach to the GPRS network, with the attachGPRS() function on line 33. ([Location 6911](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6911))
- sendWarningSMS(). This function will send an SMS message to the specified contact. ([Location 6917](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6917))
- The loop() function is declared on line 49. It starts with a for() loop and iterates 600 times. Each loop will start by waiting for a second, and then looking at the state of the digital input on pin 8. If the result is false, that means that the reed switch has been activated, and the variable intrusion is set to true before calling the sendWarningSMS() function. ([Location 6920](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6920))
- Once this loop iterates 600 times, or close to 10 minutes, the sketch will attempt to connect to a server. If the connection is ([Location 6924](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6924))
- Part I Device-Specifi c Libraries ([Location 6936](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6936))

### Chapter 18 Audio ([Location 6945](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6945)) - previous
- hardware needed to use the examples in this chapter includes: Arduino Due Ethernet Shield (Arduino, SainSmart, etc.) ([Location 6950](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6950))
- the 16-bit value of 65,536 is considered to be more than enough for most audiophiles. This is the quality found on CDs ([Location 6991](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6991))
- Humans can normally hear sounds from as low as 20 Hz all the way to 20 kHz and above. ([Location 6993](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6993))
- To digitally sample frequencies as high as 20 kHz, the effective sampling rate (the speed at which the sound is sampled) must be at least doubled or 40 kHz. ([Location 6994](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6994))
- For typical applications, a sampling rate of 44.1 kHz is used. ([Location 6995](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6995))
- kHz. 8 kHz was used for a long time for telephone systems, where audio quality was adequate to understand human voice conversations. ([Location 6997](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6997))
- DVD audio is sampled at 192 kHz, and other devices can go as high as 2 MHz. ([Location 6999](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=6999))
- A musical A has a frequency of 220 Hz, a musical A' is double that, or 440 Hz. ([Location 7008](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7008))
- “Happy Birthday” can be written in musical tones as: “CCDCFE CCDCGF CCC1AFED BBAFGF.” ([Location 7010](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7010))
- The Arduino Due is a different kind of Arduino. It is based on Atmel's implementation of an ARM Cortex-M3, ([Location 7017](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7017))
- The tone() function generates a square wave, but unlike pulse width modulation, it has a 50% duty cycle, ([Location 7024](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7024))
- results in an audible tone, but cannot represent a complex audio signal like voice. ([Location 7025](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7025))
- Digital to Analog Converters (DAC) can be used to generate waveforms and are often used to create sine, triangle, and sawtooth waves. ([Location 7030](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7030))
- they can be used to create sound— ([Location 7031](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7031))
- On the Arduino Due, the two DACs have 12-bit resolutions; ([Location 7037](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7037))
- Because the voltage range is 3.3 V and because there are 4,096 possible values, the DAC has a precision of 3.3 divided by 4,096, or approximately 0.000806. ([Location 7039](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7039))
- Digital audio files ([Location 7042](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7042))
- Resolution— ([Location 7045](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7045))
- Speed— ([Location 7046](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7046))
- Stereo or mono— ([Location 7048](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7048))
- Digital audio files can be extremely large, and wave files are not compressed. ([Location 7062](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7062))
- To play back audio files, you must first import the library: Audio.h. ([Location 7072](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7072))
- Audio.begin(rate, size); ([Location 7084](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7084))
- rate is the number of samples per second; ([Location 7086](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7086))
- For stereo audio files, you must double the audio rate (44100 for 22.05 kHz and 88200 for 44.1 kHz). ([Location 7087](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7087))
- The size parameter indicates the size of an audio buffer that will be created by this function, in milliseconds. ([Location 7087](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7087))
    - Note: typ. 100msd
- Audio.prepare(buffer, samples, volume); ([Location 7094](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7094))
- The buffer parameter is the name of a buffer created by your sketch; it is not the audio buffer created by the begin() function. ([Location 7095](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7095))
- volume parameter is the volume of the audio output, expressed as a 10-bit number; ([Location 7097](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7097))
- Audio.write(buffer, length); ([Location 7101](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7101))
- Example Program ([Location 7106](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7106))
- For this application, you create a digital thermometer, using an LM35, a small thermometer that is first presented in Chapter 14. The schematic is almost identical, but for this application, there is a change. When the user presses a button, the Arduino does not display the time; it says it out loud. ([Location 7107](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7107))

### Chapter 19 Scheduler ([Location 7238](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7238)) - previous
- Because Arduinos are designed to be single-task devices, no multitasking library was originally created. ([Location 7304](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7304))
- Some libraries allow something called a callback; ([Location 7305](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7305))
- The Arduino Due uses a different microcontroller; instead of using an Atmel AVR, it uses an Atmel ATSAM3X8, Atmel's implementation of an ARM Cortex-M3 microcontroller. It is a 32-bit device running at 84 MHz. ([Location 7311](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7311))
- Because of its capabilities, one developer in particular decided to change the way it worked and to implement a scheduling system. The library, called Scheduler, was introduced in Arduino IDE 1.5. ([Location 7312](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7312))
- Example Program ([Location 7405](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7405))

- an aquarium temperature sensor, one that will monitor the temperature and control a lighting system and control the temperature depending on the result. ([Location 7405](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7405)) - previous
### Chapter 20 USBHost ([Location 7543](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7543))
- The hardware needed to use these functions includes: Arduino Due ([Location 7553](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7553))
- The PS/2 interface was designed for simplicity. Each computer had one keyboard and one mouse. ([Location 7577](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7577))
- There were two connectors on computer mainboards: one purple port for keyboards and one green port for mice. ([Location 7579](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7579))
- They were mini-DIN connectors. ([Location 7580](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7580))
- To simplify everything, Universal Serial Bus (USB) was created, ([Location 7585](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7585))
- USB Protocol ([Location 7590](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7590))
- For USB to work, it requires at least one USB host. This is the device that controls USB devices, and USB devices communicate with the host. For a standard PC setup, the PC is the USB host. ([Location 7590](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7590))
- Sometimes drivers are needed to fully use a USB device; some devices do not require drivers because the computer already knows what the device's function ([Location 7594](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7594))
- USB On-The-Go is an extension to the USB specification, allowing devices to act as either a master (host) or slave (peripheral). Technically, all USB OTG devices are masters, but when connected to another master, they can act as a slave. ([Location 7607](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7607))
- A mobile phone can therefore be connected to a computer or to a USB drive. ([Location 7610](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7610))
- Some devices are intelligent and can communicate with a master, specifying their USB class and their capabilities. ([Location 7614](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7614))
- Some have no built-in intelligence and simply use the +5-V power supply that the USB bus supplies; ([Location 7615](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7615))
- The Arduino Due is different ([Location 7649](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7649))
- The USB connector adjacent to the power barrel, the Programming port, is a USB serial connector that is connected to an ATmega16U2 microcontroller which handles serial communication between the Arduino Due's main processor and the host computer. ([Location 7655](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7655))
- The other USB connector, the Native port, is connected directly to the SAM3X8E ([Location 7657](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7657))
- the Due has full control of this USB port, and can be connected as a slave for native serial communication. ([Location 7658](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7658))
- The Arduino Due can use the USBHost library, a powerful library containing routines to use keyboards and mice as input devices, but it does come at a cost. USB drivers tend to be big. ([Location 7664](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7664))

- Remember, waiting for USB events can block the system for up to 5 seconds, so these routines will not be called all the time. ([Location 7788](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7788)) - previous
### Chapter 21 Esplora ([Location 7858](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7858))
- The Esplora is an excellent device for users who do not want to get too involved in electronics because it integrates an amazing amount of peripherals. ([Location 7885](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7885))
- The Arduino Esplora is designed to be held in your hand and has the look and feel of a console game pad. ([Location 7896](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=7896))

### Chapter 23 Bridge ([Location 8538](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8538)) - previous
- A microcontroller (as the name implies) controls, whereas a microprocessor processes data. ([Location 8562](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8562))
- This becomes apparent for the Arduino Yún, where both are present. ([Location 8563](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8563))
- In December 2002, Linksys released its WRT54G residential wireless router. ([Location 8564](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8564))
- It was an easy way to add high-speed Wi-Fi to a home network ([Location 8565](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8565))
- These devices were based on a 125-MHz MIPS microprocessor with surprisingly good characteristics. With 16 MB of RAM and 4 MB of flash memory, ([Location 8568](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8568))
- The Linux distribution was delivered under the GPL license, and as such, Linksys had to make the source code available on its site. This sparked a group of people to look at that code, and to modify it, allowing more and more features to be added. ([Location 8570](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8570))
- An entire generation of routers were designed around this initial product, and the new firmware was released under the name OpenWRT. ([Location 8575](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8575))
- The power of OpenWRT was not only that it added advanced features, but it also contained a package manager, meaning users could install their own programs. The filesystem is also read/write-capable, ([Location 8576](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8576))
- One device to which the OpenWRT has been ported is the Arduino Yún. ([Location 8580](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8580))
- This board is actually two devices in one; on one side, it has an ATMega32u4, which is the “Arduino” side. The other side is based on an Atheros AR9331. This chip, with its corresponding RAM, Ethernet, and Wi-Fi chip, hosts an OpenWRT distribution called Linino. ([Location 8581](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8581))
- To allow the AVR to communicate with the Atheros, a library was created: Bridge. ([Location 8583](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8583))
- The Bridge class is a simple way to transfer data to and from the Linux side, ([Location 8627](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8627))
- The Process class runs and manages applications running on Linux. ([Location 8629](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8629))
- The Arduino Yún has an integrated micro-SD slot, allowing users to expand the filesystem. This card is handled by Linux, but the FileIO library provides a convenient way to interact with files ([Location 8686](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8686))
- The YunServer class is used when creating a server on the Arduino Yún's Linux distro. This allows the Arduino side of the Yún to receive requests and to answer those requests. ([Location 8737](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8737))
- when incoming connections arrive, they will be routed through the Linux processor, leaving the AVR microcontroller side of the Arduino free to do what it does best—control your sketches. To do this, use listenOnLocalhost(): ([Location 8744](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8744))
- The difference between the Arduino Yún and other models using Ethernet or Wi-Fi shields is the multitasking capacity. ([Location 8751](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8751))
- Example Application ([Location 8773](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8773))
- In Chapter 12, you created a light sensor that was capable of logging data to an SD card. In this chapter, you again use a light sensor, but one that can log the temperature to a data file with a timestamp and that can be read over a wireless connection. ([Location 8774](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8774))
- getTimeStamp() is declared on line 74. When it runs, it creates an instance of the Process class. It also creates a variable called result; this is the variable that holds the result of a Linux command. This command runs inside a process called time. The function that it calls is named date; when executing the date command, it returns something like this: ([Location 8825](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8825))
- This sketch is the basis for a compact sensor, and together with a temperature sensor and barometer, it can be used to create a wireless weather station. ([Location 8853](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8853))
- Part IV User Libraries and Shields ([Location 8862](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8862))
- Example Application ([Location 8997](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8997))
- The Si1145 from Silicon Labs is a digital UV sensor. Targeted for the wearable market, it is compact, light, and ultra-low-powered. It is a highly professional solution, but like most professional solutions, it does come at a price. That price is configuration. ([Location 8999](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=8999))

### Chapter 25 Creating Your Own Shield ([Location 9115](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9115)) - previous
- The component that you use for this project is the PCF8574AP. This component is an 8-bit I/O expander, capable of adding eight input and output pins to an I2C bus. ([Location 9184](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9184))
- The Arduino already has a built-in I2C bus, so no other components are required. ([Location 9185](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9185))
- 3.3 V and 5 V. This shield will be compatible with both types of Arduino, without the need to add voltage-shifting hardware. ([Location 9199](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9199))
- Quasi-bidirectional pins can sink a rather large amount of current (tens of milli-amps, more than enough for an LED) but can source only a small amount of current (sometimes tens of micro-amps). ([Location 9205](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9205))
- In the case of a short circuit, the device simply limits the current, as if a large resistor was placed in the circuit. ([Location 9206](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9206))
- the disadvantage is that this pin cannot be used to power all components; ([Location 9208](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9208))
- Pin 16 is VDD, supply voltage, and pin 8 is VSS, supply ground. This is a common layout for integrated circuits. ([Location 9232](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9232))
- set the addresses of the two integrated circuits. Pins 1, 2, and 3 are used for the address. For this example, device 0 (on the left) will use 000b (all low), and device 1 (on the right) will use b001; that is, A0 and A1 will be low, and A2 will be high. ([Location 9239](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9239))
- The SAMA5D3 is one example of a processor that can run a full Linux or Android system, but with Arduino shields. ([Location 9335](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9335))

### Chapter 26 Creating Your Own Library ([Location 9344](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9344)) - previous
- Now it is time to write the constructor. This function would be included in TrafficLight.cpp: ([Location 9489](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9489))
- Boolean TrafficLight::begin(void) ([Location 9516](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9516))
- class TrafficLight {   private:     uint8_t _redpin, _amberpin, _greenpin;   public:     TrafficLight(uint8_t redpin, uint8_t amberpin, uint8_t greenpin);     void begin();     void red();     void amber();    void green(); }; ([Location 9546](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9546))
- Use Standard Names ([Location 9611](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9611))
- Most hardware-related drivers use a begin() function in their code. ([Location 9612](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9612))
- if obtaining data, always use read: readInput()or readStatus(). When outputting, use write: writeData(). ([Location 9614](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9614))
- the header file should contain. It will look something like this (filename: PCF8574AP.h): ([Location 9668](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9668))
- The trick comes in separating a word into 2 bytes; this is done with masks and shifts. The first conversion transforms a word into a byte, ([Location 9746](https://readwise.io/to_kindle?action=open&asin=B00SL47ZJG&location=9746))
